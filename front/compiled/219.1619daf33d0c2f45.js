"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[219],{1219:(he,T,c)=>{c.r(T),c.d(T,{ClientsModule:()=>qe});var f=c(6019),x=c(850),r=c(7537),A=c(107),q=c(3550),m=c(5838),e=c(1514),h=c(822),v=c(9853),y=c(6588),N=c(7754),F=c(1843),b=c(6155),U=c(5749);function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e.TgZ(16,"div",30),e.TgZ(17,"i",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(3),_=e.MAs(36);return a.EditClient(s),a.modal.OpenModal(_)}),e.qZA(),e.TgZ(18,"i",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(3),_=e.MAs(34);return a.selectedClient=s,a.modal.OpenModal(_)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.rfc),e.xp6(2),e.Oqu((null==t.addresses[0]?null:t.addresses[0].street)+" #"+(null==t.addresses[0]?null:t.addresses[0].externalNumber)+(null!=t.addresses[0]&&t.addresses[0].internalNumber?" int. "+(null==t.addresses[0]?null:t.addresses[0].internalNumber):"")),e.xp6(2),e.Oqu(null==t.addresses[0]?null:t.addresses[0].postalCode),e.xp6(2),e.Oqu((null==t.addresses[0]?null:t.addresses[0].province)+", "+(null==t.addresses[0]?null:t.addresses[0].country)),e.xp6(2),e.Oqu(t.utilityPercentage+"%"),e.xp6(2),e.Oqu(t.paymentDays?t.paymentDays:"N/A")}}function k(n,i){if(1&n&&(e.TgZ(0,"table",27),e.TgZ(1,"thead",28),e.TgZ(2,"tr"),e.TgZ(3,"th"),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"RFC"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Direccion"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"CP"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Localidad"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"% utiliad"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"D\xedas de pago"),e.qZA(),e._UZ(17,"th"),e.qZA(),e.qZA(),e.TgZ(18,"tbody"),e.YNc(19,w,19,7,"tr",29),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(19),e.Q6J("ngForOf",t.clients)}}function I(n,i){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,k,20,1,"table",26),e.qZA()),2&n){const t=e.oxw(),l=e.MAs(30);e.xp6(1),e.Q6J("ngIf",!(null==t.clients||!t.clients.length))("ngIfElse",l)}}function J(n,i){1&n&&(e.TgZ(0,"div",33),e._UZ(1,"i",34),e.qZA())}function M(n,i){1&n&&(e.TgZ(0,"div",25),e.TgZ(1,"div",35),e._uU(2," No se encontraron clientes "),e.qZA(),e.qZA())}function G(n,i){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.qZA()),2&n){const t=i.$implicit;e.xp6(2),e.Oqu(t.client.name),e.xp6(2),e.Oqu(t.client.rfc),e.xp6(2),e.Oqu(t.reason?t.reason:"Error al crear")}}function D(n,i){if(1&n&&(e.TgZ(0,"div",49),e.TgZ(1,"div",50),e._uU(2," Error al crear clientes "),e.qZA(),e.TgZ(3,"table",51),e.TgZ(4,"thead",52),e.TgZ(5,"tr"),e.TgZ(6,"th"),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"RFC"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Motivo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"tbody"),e.YNc(13,G,7,3,"tr",29),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngForOf",t.clientsFailed)}}function B(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Cancelar"),e.qZA())}function Y(n,i){1&n&&(e.TgZ(0,"span"),e._uU(1,"Cerrar"),e.qZA())}function E(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",36),e.TgZ(1,"h2",37),e._uU(2,"Agregar por CSV"),e.qZA(),e.TgZ(3,"i",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.modal.CloseModal(o.loading.updating)}),e.qZA(),e.qZA(),e.TgZ(4,"div",39),e.TgZ(5,"div",40),e.TgZ(6,"div",1),e.TgZ(7,"button",41),e.NdJ("click",function(){return e.CHM(t),e.MAs(12).click()}),e._uU(8," Seleccionar archivo "),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.TgZ(11,"input",42,43),e.NdJ("change",function(o){return e.CHM(t),e.oxw().OnFileSelected(o)}),e.qZA(),e.qZA(),e.YNc(13,D,14,1,"div",44),e.qZA(),e.qZA(),e.TgZ(14,"div",45),e.TgZ(15,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e.YNc(16,B,2,0,"span",47),e.YNc(17,Y,2,0,"span",47),e.qZA(),e.TgZ(18,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().RegisterClients()}),e._uU(19),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(10),e.hij(" ",null==t.clientsCsv?null:t.clientsCsv.name," "),e.xp6(3),e.Q6J("ngIf",!(null==t.clientsFailed||!t.clientsFailed.length)),e.xp6(3),e.Q6J("ngIf",!(null!=t.clientsFailed&&t.clientsFailed.length)),e.xp6(1),e.Q6J("ngIf",!(null==t.clientsFailed||!t.clientsFailed.length)),e.xp6(2),e.hij(" ",t.csvAcceptLabel," ")}}function z(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",36),e.TgZ(1,"h2",37),e._uU(2,"Eliminar cliente"),e.qZA(),e.TgZ(3,"i",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",39),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",45),e.TgZ(8,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e._uU(9," No, cancelar "),e.qZA(),e.TgZ(10,"button",53),e.NdJ("click",function(){return e.CHM(t),e.oxw().DeleteClient()}),e._uU(11," Si, eliminar "),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(6),e.hij(' \xbfEsta seguro que desea eliminar a "',null==t.selectedClient?null:t.selectedClient.name,'"? ')}}function Q(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function S(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,Q,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"name"))?null:l.errors.required)}}function O(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function H(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Valor con formato inv\xe1lido "),e.qZA())}function R(n,i){if(1&n&&(e.TgZ(0,"span",83),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xednimo ",null==(l=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:l.errors.minlength.requiredLength," caracteres ")}}function P(n,i){if(1&n&&(e.TgZ(0,"span",83),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xe1ximo ",null==(l=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:l.errors.maxlength.requiredLength," caracteres ")}}function j(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,O,2,0,"span",82),e.YNc(2,H,2,0,"span",82),e.YNc(3,R,2,1,"span",82),e.YNc(4,P,2,1,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l,o,s,a;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:o.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:s.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(a=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:a.errors.maxlength)}}function K(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function L(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,K,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"street"))?null:l.errors.required)}}function W(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function $(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function V(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,W,2,0,"span",82),e.YNc(2,$,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:o.errors.onlynumbers)}}function X(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function ee(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function te(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,X,2,0,"span",82),e.YNc(2,ee,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:o.errors.onlynumbers)}}function ne(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function le(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function oe(n,i){if(1&n&&(e.TgZ(0,"span",83),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xednimo ",null==(l=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:l.errors.minlength.requiredLength," caracteres ")}}function ie(n,i){if(1&n&&(e.TgZ(0,"span",83),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xe1ximo ",null==(l=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:l.errors.maxlength.requiredLength," caracteres ")}}function re(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,ne,2,0,"span",82),e.YNc(2,le,2,0,"span",82),e.YNc(3,oe,2,1,"span",82),e.YNc(4,ie,2,1,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l,o,s,a;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:o.errors.onlynumbers),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:s.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(a=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:a.errors.maxlength)}}function se(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function ae(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,se,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"city"))?null:l.errors.required)}}function ce(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function _e(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,ce,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"province"))?null:l.errors.required)}}function me(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function de(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,me,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"country"))?null:l.errors.required)}}function pe(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function ue(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Solo n\xfameros "),e.qZA())}function ge(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,pe,2,0,"span",82),e.YNc(2,ue,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:o.errors.onlynumbers)}}function Ze(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Campo obligatorio "),e.qZA())}function Ce(n,i){1&n&&(e.TgZ(0,"span",83),e._uU(1," Solo n\xfameros "),e.qZA())}function fe(n,i){if(1&n&&(e.TgZ(0,"div",81),e.YNc(1,Ze,2,0,"span",82),e.YNc(2,Ce,2,0,"span",82),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:o.errors.onlynumbers)}}function Te(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",36),e.TgZ(1,"h2",37),e._uU(2),e.qZA(),e.TgZ(3,"i",38),e.NdJ("click",function(){return e.CHM(t),e.oxw().CancelEdition()}),e.qZA(),e.qZA(),e.TgZ(4,"div",39),e.TgZ(5,"div",54),e.TgZ(6,"form",55),e.TgZ(7,"div",56),e.TgZ(8,"div",57),e.TgZ(9,"div",58),e.TgZ(10,"label"),e._uU(11,"Nombre "),e.TgZ(12,"span",59),e._uU(13,"*"),e.qZA(),e.qZA(),e.TgZ(14,"div",60),e._UZ(15,"i",61),e.TgZ(16,"input",62),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(17,S,2,1,"div",63),e.qZA(),e.qZA(),e.TgZ(18,"div",57),e.TgZ(19,"div",58),e.TgZ(20,"label"),e._uU(21,"RFC "),e.TgZ(22,"span",59),e._uU(23,"*"),e.qZA(),e.qZA(),e.TgZ(24,"div",60),e._UZ(25,"i",61),e.TgZ(26,"input",64),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(27,j,5,4,"div",63),e.qZA(),e.qZA(),e.TgZ(28,"div",65),e.TgZ(29,"form",55),e.TgZ(30,"div",56),e.TgZ(31,"div",57),e.TgZ(32,"div",58),e.TgZ(33,"label"),e._uU(34,"Direcci\xf3n "),e.TgZ(35,"span",59),e._uU(36,"*"),e.qZA(),e.qZA(),e.TgZ(37,"div",60),e._UZ(38,"i",66),e.TgZ(39,"input",67),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(40,L,2,1,"div",63),e.qZA(),e.qZA(),e.TgZ(41,"div",68),e.TgZ(42,"div",58),e.TgZ(43,"label"),e._uU(44,"N\xfamero exterior "),e.TgZ(45,"span",59),e._uU(46,"*"),e.qZA(),e.qZA(),e.TgZ(47,"div",60),e._UZ(48,"i",66),e.TgZ(49,"input",69),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(50,V,3,2,"div",63),e.qZA(),e.qZA(),e.TgZ(51,"div",68),e.TgZ(52,"div",58),e.TgZ(53,"label"),e._uU(54,"N\xfamero interior"),e.qZA(),e.TgZ(55,"div",60),e._UZ(56,"i",66),e.TgZ(57,"input",70),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(58,te,3,2,"div",63),e.qZA(),e.qZA(),e.TgZ(59,"div",68),e.TgZ(60,"div",58),e.TgZ(61,"label"),e._uU(62,"C\xf3digo postal "),e.TgZ(63,"span",59),e._uU(64,"*"),e.qZA(),e.qZA(),e.TgZ(65,"div",60),e._UZ(66,"i",66),e.TgZ(67,"input",71),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(68,re,5,4,"div",63),e.qZA(),e.qZA(),e.TgZ(69,"div",68),e.TgZ(70,"div",58),e.TgZ(71,"label"),e._uU(72,"Ciudad "),e.TgZ(73,"span",59),e._uU(74,"*"),e.qZA(),e.qZA(),e.TgZ(75,"div",60),e._UZ(76,"i",72),e.TgZ(77,"input",73),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(78,ae,2,1,"div",63),e.qZA(),e.qZA(),e.TgZ(79,"div",68),e.TgZ(80,"div",58),e.TgZ(81,"label"),e._uU(82,"Estado "),e.TgZ(83,"span",59),e._uU(84,"*"),e.qZA(),e.qZA(),e.TgZ(85,"div",60),e._UZ(86,"i",72),e.TgZ(87,"input",74),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(88,_e,2,1,"div",63),e.qZA(),e.qZA(),e.TgZ(89,"div",68),e.TgZ(90,"div",58),e.TgZ(91,"label"),e._uU(92,"Pa\xeds "),e.TgZ(93,"span",59),e._uU(94,"*"),e.qZA(),e.qZA(),e.TgZ(95,"div",60),e._UZ(96,"i",72),e.TgZ(97,"input",75),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(98,de,2,1,"div",63),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(99,"div",68),e.TgZ(100,"div",58),e.TgZ(101,"label"),e._uU(102,"Porcentaje de utilidad "),e.TgZ(103,"span",59),e._uU(104,"*"),e.qZA(),e.qZA(),e.TgZ(105,"div",60),e._UZ(106,"i",76),e.TgZ(107,"input",77),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(108,ge,3,2,"div",63),e.qZA(),e.qZA(),e.TgZ(109,"div",68),e.TgZ(110,"div",58),e.TgZ(111,"label"),e._uU(112,"Dias de pago"),e.qZA(),e.TgZ(113,"div",60),e._UZ(114,"i",78),e.TgZ(115,"input",79),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(116,fe,3,2,"div",63),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(117,"div",45),e.TgZ(118,"button",46),e.NdJ("click",function(){return e.CHM(t),e.oxw().CancelEdition()}),e._uU(119," Cancelar "),e.qZA(),e.TgZ(120,"button",80),e.NdJ("click",function(){return e.CHM(t),e.oxw().RegisterClient()}),e._uU(121),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let l,o,s,a,_,d,p,u,g,Z,C;e.xp6(2),e.Oqu(t.isEditing?"Actualizar cliente":"Agregar un cliente"),e.xp6(4),e.Q6J("formGroup",t.clientForm),e.xp6(11),e.Q6J("ngIf",(null==(l=t.form.GetFormControlByName(t.clientForm,"name"))?null:l.touched)&&(null==(l=t.form.GetFormControlByName(t.clientForm,"name"))?null:l.errors)),e.xp6(10),e.Q6J("ngIf",(null==(o=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:o.touched)&&(null==(o=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:o.errors)),e.xp6(2),e.Q6J("formGroup",t.addressForm),e.xp6(11),e.Q6J("ngIf",(null==(s=t.form.GetFormControlByName(t.addressForm,"street"))?null:s.touched)&&(null==(s=t.form.GetFormControlByName(t.addressForm,"street"))?null:s.errors)),e.xp6(10),e.Q6J("ngIf",(null==(a=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:a.touched)&&(null==(a=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:a.errors)),e.xp6(8),e.Q6J("ngIf",(null==(_=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:_.touched)&&(null==(_=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:_.errors)),e.xp6(10),e.Q6J("ngIf",(null==(d=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:d.touched)&&(null==(d=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:d.errors)),e.xp6(10),e.Q6J("ngIf",(null==(p=t.form.GetFormControlByName(t.addressForm,"city"))?null:p.touched)&&(null==(p=t.form.GetFormControlByName(t.addressForm,"city"))?null:p.errors)),e.xp6(10),e.Q6J("ngIf",(null==(u=t.form.GetFormControlByName(t.addressForm,"province"))?null:u.touched)&&(null==(u=t.form.GetFormControlByName(t.addressForm,"province"))?null:u.errors)),e.xp6(10),e.Q6J("ngIf",(null==(g=t.form.GetFormControlByName(t.addressForm,"country"))?null:g.touched)&&(null==(g=t.form.GetFormControlByName(t.addressForm,"country"))?null:g.errors)),e.xp6(10),e.Q6J("ngIf",(null==(Z=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:Z.touched)&&(null==(Z=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:Z.errors)),e.xp6(8),e.Q6J("ngIf",(null==(C=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:C.touched)&&(null==(C=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:C.errors)),e.xp6(5),e.hij(" ",t.isEditing?"Actualizar":"Agregar"," ")}}const xe=function(){return{text:!0,startDate:!1,endDate:!1,options:null}},Ae=[{path:"",component:(()=>{class n{constructor(t,l,o,s,a,_){this.form=t,this.modal=l,this.toast=o,this.http=s,this.csv=a,this.nav=_,this.clients=[],this.selectedClient=null,this.isEditing=!1,this.clientsToUpload=[],this.clientsFailed=[],this.loading={updating:!1,getting:!0},this.clientForm=new r.cw({id:new r.NI(null,[]),name:new r.NI("",[r.kI.required]),rfc:new r.NI("",[r.kI.required,r.kI.pattern(/[A-Za-z0-9]{12,13}/)]),address:new r.cw({id:new r.NI(null,[]),street:new r.NI("",[r.kI.required]),externalNumber:new r.NI("",[r.kI.required,(0,m.wp)()]),internalNumber:new r.NI("",[]),city:new r.NI("",[r.kI.required]),province:new r.NI("",[r.kI.required]),country:new r.NI("",[r.kI.required]),postalCode:new r.NI("",[r.kI.required,r.kI.minLength(5),r.kI.maxLength(5),(0,m.wp)()])}),utilityPercentage:new r.NI("",[r.kI.required,(0,m.wp)()]),paymentDays:new r.NI("",[(0,m.wp)()])}),this.dataConversions=[{oldKey:"Nombre",newKey:"name"},{oldKey:"RFC",newKey:"rfc"},{oldKey:"Direcci\xf3n",newKey:"address"},{oldKey:"C\xf3digo postal",newKey:"postalCode"},{oldKey:"Estado",newKey:"state"},{oldKey:"Pa\xeds",newKey:"country"},{oldKey:"Porcentaje de utilidad",newKey:"utilityPercentage"},{oldKey:"D\xedas de pago",newKey:"paymentDays"}]}get csvAcceptLabel(){return this.clientsFailed.length?"Reintentar":"Subir"}get addressForm(){return this.clientForm.get("address")}ngOnInit(){this.GetClients()}GoHome(){this.nav.GoToRoleRoute("")}GetClients(t=null){this.loading.getting=!0;let l="/Clients";t&&(l+=`/FilteredBy/Text/${t.text}`),this.http.Get(l).subscribe(o=>{this.clients=o,this.loading.getting=!1},o=>{console.error("Error getting clients",o),this.loading.getting=!1})}RegisterClient(){if(this.clientForm.invalid)return this.clientForm.markAllAsTouched(),void this.toast.ShowDefaultWarning("Favor de llenar los campos obligatorios");this.isEditing?this.UpdateClient():this.http.Post("Clients",{client:this.clientForm.value}).subscribe(t=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente creado exitosamente"),this.clientForm.reset(),this.modal.CloseModal()},t=>{this.toast.ShowDefaultDanger("Error al crear cliente"),console.error("Error creating client",t)})}RegisterClients(){this.http.Post("Clients/Array",{clients:this.clientsToUpload}).subscribe(t=>{this.clientsFailed=t.clientsFailed,t.clientsSuccess.length&&this.toast.ShowDefaultSuccess(`${t.clientsSuccess.length} clientes creados correctamente`),t.clientsFailed.length?this.toast.ShowDefaultWarning(`${t.clientsFailed.length} clientes no se pudieron crear`):(this.modal.CloseModal(),this.clientsToUpload=[]),this.GetClients()},t=>{console.error("Error creating clients",t),this.toast.ShowDefaultDanger("Error al crear clientes")})}UpdateClient(){this.http.Patch("Clients",{client:this.clientForm.value}).subscribe(l=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente actualizado con \xe9xito"),this.modal.CloseModal(),this.isEditing=!1},l=>{console.error("Error patching client",l),this.toast.ShowDefaultDanger("Error al actualizar cliente")})}CancelEdition(){this.modal.CloseModal(this.loading.updating),this.isEditing=!1,this.clientForm.reset()}EditClient(t){this.isEditing=!0,this.clientForm.setValue({id:t.id,name:t.name,rfc:t.rfc,address:{id:t.addresses[0]?t.addresses[0].id:null,street:t.addresses[0]?t.addresses[0].street:null,externalNumber:t.addresses[0]?t.addresses[0].externalNumber:null,internalNumber:t.addresses[0]?t.addresses[0].internalNumber:null,city:t.addresses[0]?t.addresses[0].city:null,province:t.addresses[0]?t.addresses[0].province:null,country:t.addresses[0]?t.addresses[0].country:null,postalCode:t.addresses[0]?t.addresses[0].postalCode:null},utilityPercentage:t.utilityPercentage,paymentDays:t.paymentDays})}DeleteClient(){this.http.Delete(`Clients/${this.selectedClient.id}`,{}).subscribe(t=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente eliminado correctamente"),this.modal.CloseModal()},t=>{console.error("Error deleting client",t),this.toast.ShowDefaultDanger("Error al eliminar cliente")})}DownloadTemplate(){this.http.DownloadFileWithoutApi("assets/templates/plantilla_clientes.csv","plantilla_clientes.csv")}OnFileSelected(t){const l=t.target.files[0];if(this.clientsCsv=l,!l)return;const o=new FileReader;o.onload=s=>{this.csv.ReadCSV(o.result).then(a=>{this.clientsToUpload=this.FormatData(a.data)})},o.readAsText(l,"ISO-8859-3")}FormatData(t){return t.map(l=>{let o={};return this.dataConversions.forEach(s=>{o[s.newKey]=l[s.oldKey]}),o})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.o),e.Y36(v.Z),e.Y36(y.k),e.Y36(N.O),e.Y36(F.M),e.Y36(b.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-clients"]],decls:37,vars:5,consts:[[1,"content"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"zmdi","zmdi-home","zmdi-hc-lg","mr-2","clickeable",3,"click"],[1,"d-flex"],[1,"btn","btn-success","mx-1",3,"click"],[1,"zmdi","zmdi-plus-circle-o","zmdi-hc-lg","mr-2"],["id","csvClientsDropdown","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"clickeable","px-2"],[1,"btn","btn-success","mx-1"],[1,"zmdi","zmdi-file","zmdi-hc-lg","mr-2"],["aria-labelledby","csvClientsDropdown",1,"dropdown-menu","px-1","py-1"],[1,"menu-list"],[1,"d-flex","align-items-center","px-3","my-1","clickeable-hover",3,"click"],[1,"zmdi","zmdi-file-text"],[1,"pl-2"],[1,"zmdi","zmdi-file-plus"],[1,"row","justify-content-center"],[1,"col-12","col-lg-11","mt-3","mb-4"],[3,"timerTrigger","filters","onSearch"],["class","col-12 col-lg-11",4,"ngIf","ngIfElse"],["bigLoading",""],["noClientsMessage",""],["addClientsByCsvModal",""],["deleteClientModal",""],["addOrEditClientModal",""],[1,"col-12","col-lg-11"],["class","table table-striped",4,"ngIf","ngIfElse"],[1,"table","table-striped"],[1,"table-thead"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-center"],[1,"zmdi","zmdi-edit","zmdi-hc-lg","clickeable","mx-2",3,"click"],[1,"zmdi","zmdi-delete","zmdi-hc-lg","clickeable","mx-2",3,"click"],[1,"col-12","w-100","h-75","d-flex","align-items-center","justify-content-center",2,"min-height","min-content"],[1,"zmdi","zmdi-spinner","zmdi-hc-5x","zmdi-hc-spin"],[1,"no-items-message"],[1,"modal-header"],[1,"modal-title"],[1,"close-modal-button","zmdi","zmdi-close-circle-o","zmdi-hc-2x","clickeable",3,"click"],[1,"modal-body"],[1,"d-flex","flex-column","justify-content-between"],[1,"btn","btn-outline-primary",3,"click"],["type","file","accept",".csv",1,"d-none",3,"change"],["csvFileInput",""],["class","modal-table",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"modal-table"],[1,"my-4","text-center",2,"font-size","1.25rem","font-weight","700"],[1,"table","table-danger","table-striped"],[1,"table-thead","bg-danger"],[1,"btn","btn-danger",3,"click"],[1,"w-100"],[3,"formGroup"],[1,"row"],[1,"col-12"],[1,"form-group"],[1,"text-danger"],[1,"input-container"],[1,"input-icon","zmdi","zmdi-account-o","zmdi-hc-lg"],["type","text","placeholder","Nombre del cliente","formControlName","name",1,"form-control",3,"keyup.enter"],["class","error-messages",4,"ngIf"],["type","text","placeholder","RFC del cliente","formControlName","rfc",1,"form-control",3,"keyup.enter"],[1,"col-12","px-0"],[1,"input-icon","zmdi","zmdi-home","zmdi-hc-lg"],["type","text","placeholder","Direcci\xf3n del cliente","formControlName","street",1,"form-control",3,"keyup.enter"],[1,"col-12","col-sm-6"],["type","text","placeholder","Numero exterior","formControlName","externalNumber",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Numero interior","formControlName","internalNumber",1,"form-control",3,"keyup.enter"],["type","text","placeholder","C\xf3digo posal del cliente","formControlName","postalCode",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-globe","zmdi-hc-lg"],["type","text","placeholder","Ciudad del cliente","formControlName","city",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Estado del cliente","formControlName","province",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Pa\xeds del cliente","formControlName","country",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-balance-wallet","zmdi-hc-lg"],["type","text","placeholder","Porcentaje de utilidad del cliente","formControlName","utilityPercentage",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-time-countdown","zmdi-hc-lg"],["type","text","placeholder","Dias de pago del cliente","formControlName","paymentDays",1,"form-control",3,"keyup.enter"],[1,"btn","btn-primary",3,"click"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"]],template:function(t,l){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"i",3),e.NdJ("click",function(){return l.GoHome()}),e.qZA(),e._uU(4," Mis clientes "),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(36);return l.modal.OpenModal(a)}),e._UZ(7,"i",6),e._uU(8," Agregar "),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"button",8),e._UZ(11,"i",9),e._uU(12," CSV "),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.NdJ("click",function(){return l.DownloadTemplate()}),e._UZ(16,"i",13),e.TgZ(17,"span",14),e._uU(18,"Descargar plantilla"),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(32);return l.modal.OpenModal(a)}),e._UZ(20,"i",15),e.TgZ(21,"span",14),e._uU(22,"Subir archivo"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",16),e.TgZ(24,"div",17),e.TgZ(25,"app-filters",18),e.NdJ("onSearch",function(a){return l.GetClients(a)}),e.qZA(),e.qZA(),e.YNc(26,I,2,2,"div",19),e.qZA(),e.qZA(),e.YNc(27,J,2,0,"ng-template",null,20,e.W1O),e.YNc(29,M,3,0,"ng-template",null,21,e.W1O),e.YNc(31,E,20,5,"ng-template",null,22,e.W1O),e.YNc(33,z,12,1,"ng-template",null,23,e.W1O),e.YNc(35,Te,122,15,"ng-template",null,24,e.W1O)}if(2&t){const o=e.MAs(28);e.xp6(25),e.Q6J("timerTrigger",!0)("filters",e.DdM(4,xe)),e.xp6(1),e.Q6J("ngIf",!l.loading.getting)("ngIfElse",o)}},directives:[U.b,f.O5,f.sg,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u],styles:[""]}),n})()}];let qe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.u5,f.ez,A.O,q.F,r.UX,x.Bz.forChild(Ae)]]}),n})()}}]);