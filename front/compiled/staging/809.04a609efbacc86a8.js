"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[809],{1809:(f,u,i)=>{i.r(u),i.d(u,{LoginModule:()=>y});var g=i(6019),d=i(3697),r=i(7537),o=i(1514),l=i(6845),c=i(822),p=i(6588),v=i(9299),Z=i(6155);function h(e,s){1&e&&(o.TgZ(0,"span",23),o._uU(1," Email no valido "),o.qZA())}function T(e,s){1&e&&(o.TgZ(0,"span",23),o._uU(1," Favor de ingresar su email "),o.qZA())}function F(e,s){if(1&e&&(o.TgZ(0,"div",21),o.YNc(1,h,2,0,"span",22),o.YNc(2,T,2,0,"span",22),o.qZA()),2&e){const n=o.oxw();let t,a;o.xp6(1),o.Q6J("ngIf",null==(t=n.form.GetFormControlByName(n.loginForm,"email"))?null:t.errors.pattern),o.xp6(1),o.Q6J("ngIf",null==(a=n.form.GetFormControlByName(n.loginForm,"email"))?null:a.errors.required)}}function C(e,s){1&e&&(o.TgZ(0,"span",23),o._uU(1," Favor de ingresar su contrase\xf1a "),o.qZA())}function A(e,s){if(1&e&&(o.TgZ(0,"div",21),o.YNc(1,C,2,0,"span",22),o.qZA()),2&e){const n=o.oxw();let t;o.xp6(1),o.Q6J("ngIf",null==(t=n.form.GetFormControlByName(n.loginForm,"password"))?null:t.errors.required)}}const _=[{path:"",component:(()=>{class e{constructor(n,t,a,m,N,L){this.http=n,this.form=t,this.toast=a,this.router=m,this.role=N,this.nav=L,this.loginForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required])})}ngOnInit(){this.role.GetUserRole()&&this.nav.GoToRoleRoute("")}Login(){if(!this.loginForm.valid)return this.loginForm.markAllAsTouched(),void this.toast.ShowDefaultWarning("Favor de llenar todos los campos","Formulario incompleto");this.http.Post("/Accounts/Login",{credentials:this.loginForm.value}).subscribe(n=>{this.SetUserSession(n),this.toast.ShowDefaultSuccess("Sesi\xf3n iniciada correctamente"),this.router.navigate([`/${n.role.name.toLowerCase()}/dashboard`])},n=>{console.error("Error al hacer login",n),this.toast.ShowDefaultDanger(n||"Error al hacer login")})}SetUserSession(n){if(n){const t=n.token;delete n.token,localStorage.setItem("token",t.id),localStorage.setItem("user",JSON.stringify(n))}}}return e.\u0275fac=function(n){return new(n||e)(o.Y36(l.O),o.Y36(c.o),o.Y36(p.k),o.Y36(d.F0),o.Y36(v.N),o.Y36(Z.f))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-login"]],decls:28,vars:3,consts:[[1,"component-container"],[1,"vertical-center"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-12","col-md-8","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","email"],[1,"input-container"],[1,"input-icon","zmdi","zmdi-email","zmdi-hc-lg"],["type","text","placeholder","Correo","formControlName","email",1,"form-control",3,"keyup.enter"],["class","error-messages",4,"ngIf"],["for","password"],[1,"input-icon","zmdi","zmdi-lock","zmdi-hc-lg"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control",3,"keyup.enter"],[1,"card-footer","text-right"],[1,"btn","btn-primary",3,"click"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"]],template:function(n,t){if(1&n&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"h3",7),o._uU(8,"Login"),o.qZA(),o.qZA(),o.TgZ(9,"div",8),o.TgZ(10,"form",9),o.TgZ(11,"div",10),o.TgZ(12,"label",11),o._uU(13,"Email"),o.qZA(),o.TgZ(14,"div",12),o._UZ(15,"i",13),o.TgZ(16,"input",14),o.NdJ("keyup.enter",function(){return t.Login()}),o.qZA(),o.qZA(),o.YNc(17,F,3,2,"div",15),o.qZA(),o.TgZ(18,"div",10),o.TgZ(19,"label",16),o._uU(20,"Contrase\xf1a"),o.qZA(),o.TgZ(21,"div",12),o._UZ(22,"i",17),o.TgZ(23,"input",18),o.NdJ("keyup.enter",function(){return t.Login()}),o.qZA(),o.qZA(),o.YNc(24,A,2,1,"div",15),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"div",19),o.TgZ(26,"button",20),o.NdJ("click",function(){return t.Login()}),o._uU(27," Iniciar sesi\xf3n "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&n){let a,m;o.xp6(10),o.Q6J("formGroup",t.loginForm),o.xp6(7),o.Q6J("ngIf",(null==(a=t.form.GetFormControlByName(t.loginForm,"email"))?null:a.touched)&&(null==(a=t.form.GetFormControlByName(t.loginForm,"email"))?null:a.errors)),o.xp6(7),o.Q6J("ngIf",(null==(m=t.form.GetFormControlByName(t.loginForm,"password"))?null:m.touched)&&(null==(m=t.form.GetFormControlByName(t.loginForm,"password"))?null:m.errors))}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,g.O5],styles:[".component-container[_ngcontent-%COMP%]{height:91vh;width:100%;display:block;margin:0!important;padding:0;background:linear-gradient(0deg,#0096c0,#c2e6fd 75%)!important}.card[_ngcontent-%COMP%]{background-color:#fff8;box-shadow:none!important}.vertical-center[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[r.u5,g.ez,r.UX,d.Bz.forChild(_)]]}),e})()},822:(f,u,i)=>{i.d(u,{o:()=>d});var g=i(1514);let d=(()=>{class r{constructor(){}GetFormControlByName(l,c){return l.get(c)}BuildAddress(l,c){let p=`${l.street} #${l.externalNumber} ${l.internalNumber?`" int. ${l.internalNumber}`:""}`;return c&&(p+=""),p}ResetForm(l){l.reset()}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=g.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);