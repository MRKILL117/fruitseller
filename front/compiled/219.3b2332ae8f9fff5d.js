"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[219],{1219:(he,T,_)=>{_.r(T),_.d(T,{ClientsModule:()=>Ae});var f=_(6019),x=_(850),i=_(7537),A=_(107),h=_(3550),d=_(5838),e=_(1514),y=_(822),v=_(9853),q=_(6588),N=_(7754),F=_(1843),b=_(6155),U=_(5749);function w(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td"),e.TgZ(16,"div",31),e.TgZ(17,"button",32),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).GoToClientAddresses(s)}),e._uU(18," Ver direcciones "),e.qZA(),e.TgZ(19,"div",33),e.TgZ(20,"i",34),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(3),c=e.MAs(40);return a.EditClient(s),a.modal.OpenModal(c)}),e.qZA(),e.TgZ(21,"i",35),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw(3),c=e.MAs(38);return a.selectedClient=s,a.modal.OpenModal(c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.$implicit,l=e.oxw(3);e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.rfc),e.xp6(2),e.Oqu(l.GenerateClientAddress(t)),e.xp6(2),e.Oqu(null==t.addresses[0]?null:t.addresses[0].postalCode),e.xp6(2),e.Oqu((null==t.addresses[0]?null:t.addresses[0].province)+", "+(null==t.addresses[0]?null:t.addresses[0].country)),e.xp6(2),e.Oqu(t.utilityPercentage+"%"),e.xp6(2),e.Oqu(t.paymentDays?t.paymentDays:"N/A")}}function k(n,r){if(1&n&&(e.TgZ(0,"table",28),e.TgZ(1,"thead",29),e.TgZ(2,"tr"),e.TgZ(3,"th"),e._uU(4,"Nombre"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"RFC"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Direcci\xf3n principal"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"CP"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Localidad"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"% utiliad"),e.qZA(),e.TgZ(15,"th"),e._uU(16,"D\xedas de pago"),e.qZA(),e._UZ(17,"th"),e.qZA(),e.qZA(),e.TgZ(18,"tbody"),e.YNc(19,w,22,7,"tr",30),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(19),e.Q6J("ngForOf",t.clients)}}function J(n,r){if(1&n&&(e.TgZ(0,"div",26),e.YNc(1,k,20,1,"table",27),e.qZA()),2&n){const t=e.oxw(),l=e.MAs(34);e.xp6(1),e.Q6J("ngIf",!(null==t.clients||!t.clients.length))("ngIfElse",l)}}function I(n,r){1&n&&(e.TgZ(0,"div",36),e._UZ(1,"i",37),e.qZA())}function G(n,r){1&n&&(e.TgZ(0,"div",26),e.TgZ(1,"div",38),e._uU(2," No se encontraron clientes "),e.qZA(),e.qZA())}function M(n,r){if(1&n&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.qZA()),2&n){const t=r.$implicit;e.xp6(2),e.Oqu(t.client.name),e.xp6(2),e.Oqu(t.client.rfc),e.xp6(2),e.Oqu(t.reason?t.reason:"Error al crear")}}function D(n,r){if(1&n&&(e.TgZ(0,"div",51),e.TgZ(1,"div",52),e._uU(2," Error al crear clientes "),e.qZA(),e.TgZ(3,"table",53),e.TgZ(4,"thead",54),e.TgZ(5,"tr"),e.TgZ(6,"th"),e._uU(7,"Nombre"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"RFC"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Motivo"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"tbody"),e.YNc(13,M,7,3,"tr",30),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(13),e.Q6J("ngForOf",t.clientsFailed)}}function B(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"Cancelar"),e.qZA())}function E(n,r){1&n&&(e.TgZ(0,"span"),e._uU(1,"Cerrar"),e.qZA())}function z(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"h2",40),e._uU(2,"Agregar por CSV"),e.qZA(),e.TgZ(3,"i",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return o.modal.CloseModal(o.loading.updating)}),e.qZA(),e.qZA(),e.TgZ(4,"div",42),e.TgZ(5,"div",43),e.TgZ(6,"div",1),e.TgZ(7,"button",32),e.NdJ("click",function(){return e.CHM(t),e.MAs(12).click()}),e._uU(8," Seleccionar archivo "),e.qZA(),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.TgZ(11,"input",44,45),e.NdJ("change",function(o){return e.CHM(t),e.oxw().OnFileSelected(o)}),e.qZA(),e.qZA(),e.YNc(13,D,14,1,"div",46),e.qZA(),e.qZA(),e.TgZ(14,"div",47),e.TgZ(15,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e.YNc(16,B,2,0,"span",49),e.YNc(17,E,2,0,"span",49),e.qZA(),e.TgZ(18,"button",50),e.NdJ("click",function(){return e.CHM(t),e.oxw().RegisterClients()}),e._uU(19),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(10),e.hij(" ",null==t.clientsCsv?null:t.clientsCsv.name," "),e.xp6(3),e.Q6J("ngIf",!(null==t.clientsFailed||!t.clientsFailed.length)),e.xp6(3),e.Q6J("ngIf",!(null!=t.clientsFailed&&t.clientsFailed.length)),e.xp6(1),e.Q6J("ngIf",!(null==t.clientsFailed||!t.clientsFailed.length)),e.xp6(2),e.hij(" ",t.csvAcceptLabel," ")}}function Y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"h2",40),e._uU(2,"Eliminar cliente"),e.qZA(),e.TgZ(3,"i",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",42),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",47),e.TgZ(8,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e._uU(9," No, cancelar "),e.qZA(),e.TgZ(10,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().DeleteClient()}),e._uU(11," Si, eliminar "),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(6),e.hij(' \xbfEsta seguro que desea eliminar a "',null==t.selectedClient?null:t.selectedClient.name,'"? ')}}function Q(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function S(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,Q,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"name"))?null:l.errors.required)}}function O(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function R(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Valor con formato inv\xe1lido "),e.qZA())}function H(n,r){if(1&n&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xednimo ",null==(l=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:l.errors.minlength.requiredLength," caracteres ")}}function P(n,r){if(1&n&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xe1ximo ",null==(l=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:l.errors.maxlength.requiredLength," caracteres ")}}function K(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,O,2,0,"span",84),e.YNc(2,R,2,0,"span",84),e.YNc(3,H,2,1,"span",84),e.YNc(4,P,2,1,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l,o,s,a;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:o.errors.pattern),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:s.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(a=t.form.GetFormControlByName(t.clientForm,"postalCode"))?null:a.errors.maxlength)}}function j(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function L(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,j,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"street"))?null:l.errors.required)}}function $(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function W(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function V(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,$,2,0,"span",84),e.YNc(2,W,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:o.errors.onlynumbers)}}function X(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function ee(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function te(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,X,2,0,"span",84),e.YNc(2,ee,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:o.errors.onlynumbers)}}function ne(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function le(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function oe(n,r){if(1&n&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xednimo ",null==(l=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:l.errors.minlength.requiredLength," caracteres ")}}function re(n,r){if(1&n&&(e.TgZ(0,"span",85),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let l;e.xp6(1),e.hij(" M\xe1ximo ",null==(l=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:l.errors.maxlength.requiredLength," caracteres ")}}function ie(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,ne,2,0,"span",84),e.YNc(2,le,2,0,"span",84),e.YNc(3,oe,2,1,"span",84),e.YNc(4,re,2,1,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l,o,s,a;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:o.errors.onlynumbers),e.xp6(1),e.Q6J("ngIf",null==(s=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:s.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(a=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:a.errors.maxlength)}}function se(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function ae(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,se,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"city"))?null:l.errors.required)}}function ce(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function _e(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,ce,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"province"))?null:l.errors.required)}}function me(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function de(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,me,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.addressForm,"country"))?null:l.errors.required)}}function pe(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function ue(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Solo n\xfameros "),e.qZA())}function ge(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,pe,2,0,"span",84),e.YNc(2,ue,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:o.errors.onlynumbers)}}function Ze(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Campo obligatorio "),e.qZA())}function Ce(n,r){1&n&&(e.TgZ(0,"span",85),e._uU(1," Solo n\xfameros "),e.qZA())}function fe(n,r){if(1&n&&(e.TgZ(0,"div",83),e.YNc(1,Ze,2,0,"span",84),e.YNc(2,Ce,2,0,"span",84),e.qZA()),2&n){const t=e.oxw(2);let l,o;e.xp6(1),e.Q6J("ngIf",null==(l=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:l.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:o.errors.onlynumbers)}}function Te(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",39),e.TgZ(1,"h2",40),e._uU(2),e.qZA(),e.TgZ(3,"i",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().CancelEdition()}),e.qZA(),e.qZA(),e.TgZ(4,"div",42),e.TgZ(5,"div",56),e.TgZ(6,"form",57),e.TgZ(7,"div",58),e.TgZ(8,"div",59),e.TgZ(9,"div",60),e.TgZ(10,"label"),e._uU(11,"Nombre "),e.TgZ(12,"span",61),e._uU(13,"*"),e.qZA(),e.qZA(),e.TgZ(14,"div",62),e._UZ(15,"i",63),e.TgZ(16,"input",64),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(17,S,2,1,"div",65),e.qZA(),e.qZA(),e.TgZ(18,"div",59),e.TgZ(19,"div",60),e.TgZ(20,"label"),e._uU(21,"RFC "),e.TgZ(22,"span",61),e._uU(23,"*"),e.qZA(),e.qZA(),e.TgZ(24,"div",62),e._UZ(25,"i",63),e.TgZ(26,"input",66),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(27,K,5,4,"div",65),e.qZA(),e.qZA(),e.TgZ(28,"div",67),e.TgZ(29,"form",57),e.TgZ(30,"div",58),e.TgZ(31,"div",59),e.TgZ(32,"div",60),e.TgZ(33,"label"),e._uU(34,"Direcci\xf3n "),e.TgZ(35,"span",61),e._uU(36,"*"),e.qZA(),e.qZA(),e.TgZ(37,"div",62),e._UZ(38,"i",68),e.TgZ(39,"input",69),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(40,L,2,1,"div",65),e.qZA(),e.qZA(),e.TgZ(41,"div",70),e.TgZ(42,"div",60),e.TgZ(43,"label"),e._uU(44,"N\xfamero exterior "),e.TgZ(45,"span",61),e._uU(46,"*"),e.qZA(),e.qZA(),e.TgZ(47,"div",62),e._UZ(48,"i",68),e.TgZ(49,"input",71),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(50,V,3,2,"div",65),e.qZA(),e.qZA(),e.TgZ(51,"div",70),e.TgZ(52,"div",60),e.TgZ(53,"label"),e._uU(54,"N\xfamero interior"),e.qZA(),e.TgZ(55,"div",62),e._UZ(56,"i",68),e.TgZ(57,"input",72),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(58,te,3,2,"div",65),e.qZA(),e.qZA(),e.TgZ(59,"div",70),e.TgZ(60,"div",60),e.TgZ(61,"label"),e._uU(62,"C\xf3digo postal "),e.TgZ(63,"span",61),e._uU(64,"*"),e.qZA(),e.qZA(),e.TgZ(65,"div",62),e._UZ(66,"i",68),e.TgZ(67,"input",73),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(68,ie,5,4,"div",65),e.qZA(),e.qZA(),e.TgZ(69,"div",70),e.TgZ(70,"div",60),e.TgZ(71,"label"),e._uU(72,"Ciudad "),e.TgZ(73,"span",61),e._uU(74,"*"),e.qZA(),e.qZA(),e.TgZ(75,"div",62),e._UZ(76,"i",74),e.TgZ(77,"input",75),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(78,ae,2,1,"div",65),e.qZA(),e.qZA(),e.TgZ(79,"div",70),e.TgZ(80,"div",60),e.TgZ(81,"label"),e._uU(82,"Estado "),e.TgZ(83,"span",61),e._uU(84,"*"),e.qZA(),e.qZA(),e.TgZ(85,"div",62),e._UZ(86,"i",74),e.TgZ(87,"input",76),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(88,_e,2,1,"div",65),e.qZA(),e.qZA(),e.TgZ(89,"div",70),e.TgZ(90,"div",60),e.TgZ(91,"label"),e._uU(92,"Pa\xeds "),e.TgZ(93,"span",61),e._uU(94,"*"),e.qZA(),e.qZA(),e.TgZ(95,"div",62),e._UZ(96,"i",74),e.TgZ(97,"input",77),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(98,de,2,1,"div",65),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(99,"div",70),e.TgZ(100,"div",60),e.TgZ(101,"label"),e._uU(102,"Porcentaje de utilidad "),e.TgZ(103,"span",61),e._uU(104,"*"),e.qZA(),e.qZA(),e.TgZ(105,"div",62),e._UZ(106,"i",78),e.TgZ(107,"input",79),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(108,ge,3,2,"div",65),e.qZA(),e.qZA(),e.TgZ(109,"div",70),e.TgZ(110,"div",60),e.TgZ(111,"label"),e._uU(112,"Dias de pago"),e.qZA(),e.TgZ(113,"div",62),e._UZ(114,"i",80),e.TgZ(115,"input",81),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().RegisterClient()}),e.qZA(),e.qZA(),e.YNc(116,fe,3,2,"div",65),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(117,"div",47),e.TgZ(118,"button",48),e.NdJ("click",function(){return e.CHM(t),e.oxw().CancelEdition()}),e._uU(119," Cancelar "),e.qZA(),e.TgZ(120,"button",82),e.NdJ("click",function(){return e.CHM(t),e.oxw().RegisterClient()}),e._uU(121),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let l,o,s,a,c,m,p,u,g,Z,C;e.xp6(2),e.Oqu(t.isEditing?"Actualizar cliente":"Agregar un cliente"),e.xp6(4),e.Q6J("formGroup",t.clientForm),e.xp6(11),e.Q6J("ngIf",(null==(l=t.form.GetFormControlByName(t.clientForm,"name"))?null:l.touched)&&(null==(l=t.form.GetFormControlByName(t.clientForm,"name"))?null:l.errors)),e.xp6(10),e.Q6J("ngIf",(null==(o=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:o.touched)&&(null==(o=t.form.GetFormControlByName(t.clientForm,"rfc"))?null:o.errors)),e.xp6(2),e.Q6J("formGroup",t.addressForm),e.xp6(11),e.Q6J("ngIf",(null==(s=t.form.GetFormControlByName(t.addressForm,"street"))?null:s.touched)&&(null==(s=t.form.GetFormControlByName(t.addressForm,"street"))?null:s.errors)),e.xp6(10),e.Q6J("ngIf",(null==(a=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:a.touched)&&(null==(a=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:a.errors)),e.xp6(8),e.Q6J("ngIf",(null==(c=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:c.touched)&&(null==(c=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:c.errors)),e.xp6(10),e.Q6J("ngIf",(null==(m=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:m.touched)&&(null==(m=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:m.errors)),e.xp6(10),e.Q6J("ngIf",(null==(p=t.form.GetFormControlByName(t.addressForm,"city"))?null:p.touched)&&(null==(p=t.form.GetFormControlByName(t.addressForm,"city"))?null:p.errors)),e.xp6(10),e.Q6J("ngIf",(null==(u=t.form.GetFormControlByName(t.addressForm,"province"))?null:u.touched)&&(null==(u=t.form.GetFormControlByName(t.addressForm,"province"))?null:u.errors)),e.xp6(10),e.Q6J("ngIf",(null==(g=t.form.GetFormControlByName(t.addressForm,"country"))?null:g.touched)&&(null==(g=t.form.GetFormControlByName(t.addressForm,"country"))?null:g.errors)),e.xp6(10),e.Q6J("ngIf",(null==(Z=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:Z.touched)&&(null==(Z=t.form.GetFormControlByName(t.clientForm,"utilityPercentage"))?null:Z.errors)),e.xp6(8),e.Q6J("ngIf",(null==(C=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:C.touched)&&(null==(C=t.form.GetFormControlByName(t.clientForm,"paymentDays"))?null:C.errors)),e.xp6(5),e.hij(" ",t.isEditing?"Actualizar":"Agregar"," ")}}const xe=[{path:"",component:(()=>{class n{constructor(t,l,o,s,a,c){this.form=t,this.modal=l,this.toast=o,this.http=s,this.csv=a,this.nav=c,this.clients=[],this.selectedClient=null,this.isEditing=!1,this.clientsToUpload=[],this.clientsFailed=[],this.filters=[{name:"text",type:"text",placeholder:"Buscar"}],this.loading={updating:!1,getting:!0},this.clientForm=new i.cw({id:new i.NI(null,[]),name:new i.NI("",[i.kI.required]),rfc:new i.NI("",[i.kI.required,i.kI.pattern(/[A-Za-z0-9]{12,13}/)]),address:new i.cw({id:new i.NI(null,[]),street:new i.NI("",[i.kI.required]),externalNumber:new i.NI("",[i.kI.required,(0,d.wp)()]),internalNumber:new i.NI("",[]),city:new i.NI("",[i.kI.required]),province:new i.NI("",[i.kI.required]),country:new i.NI("",[i.kI.required]),postalCode:new i.NI("",[i.kI.required,i.kI.minLength(5),i.kI.maxLength(5),(0,d.wp)()])}),utilityPercentage:new i.NI("",[i.kI.required,(0,d.wp)()]),paymentDays:new i.NI("",[(0,d.wp)()])}),this.dataConversions=[{oldKey:"Nombre",newKey:"name"},{oldKey:"RFC",newKey:"rfc"},{oldKey:"Calle",newKey:"street"},{oldKey:"No. exterior",newKey:"externalNumber"},{oldKey:"No. interior",newKey:"internalNumber"},{oldKey:"C\xf3digo postal",newKey:"postalCode"},{oldKey:"Ciudad",newKey:"city"},{oldKey:"Estado",newKey:"province"},{oldKey:"Pa\xeds",newKey:"country"},{oldKey:"Porcentaje de utilidad",newKey:"utilityPercentage"},{oldKey:"D\xedas de pago",newKey:"paymentDays"}]}get csvAcceptLabel(){return this.clientsFailed.length?"Reintentar":"Subir"}get addressForm(){return this.clientForm.get("address")}ngOnInit(){this.GetClients()}GoHome(){this.nav.GoToRoleRoute("")}GoToClientAddresses(t){this.nav.GoToRoleRoute(`clients/${t.id}/addresses`)}GetClients(t=null){this.loading.getting=!0;let l="/Clients";t&&(l+=`/FilteredBy/Text/${t.text}`),this.http.Get(l).subscribe(o=>{this.clients=o,this.loading.getting=!1},o=>{console.error("Error getting clients",o),this.loading.getting=!1})}RegisterClient(){if(this.clientForm.invalid)return this.clientForm.markAllAsTouched(),void this.toast.ShowDefaultWarning("Favor de llenar los campos obligatorios");this.isEditing?this.UpdateClient():this.http.Post("Clients",{client:this.clientForm.value}).subscribe(t=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente creado exitosamente"),this.clientForm.reset(),this.modal.CloseModal()},t=>{this.toast.ShowDefaultDanger(this.http.GetErrorMessage(t)||"Error al crear el cliente"),console.error("Error creating client",t)})}RegisterClients(){this.http.Post("Clients/Array",{clients:this.clientsToUpload}).subscribe(t=>{this.clientsFailed=t.clientsFailed,t.clientsSuccess.length&&this.toast.ShowDefaultSuccess(`${t.clientsSuccess.length} clientes creados correctamente`),t.clientsFailed.length?this.toast.ShowDefaultWarning(`${t.clientsFailed.length} clientes no se pudieron crear`):(this.modal.CloseModal(),this.clientsToUpload=[]),this.GetClients()},t=>{console.error("Error creating clients",t),this.toast.ShowDefaultDanger("Error al crear clientes")})}UpdateClient(){this.http.Patch("Clients",{client:this.clientForm.value}).subscribe(l=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente actualizado con \xe9xito"),this.modal.CloseModal(),this.isEditing=!1},l=>{console.error("Error patching client",l),this.toast.ShowDefaultDanger(this.http.GetErrorMessage(l)||"Error al actualizar el cliente")})}CancelEdition(){this.modal.CloseModal(this.loading.updating),this.isEditing=!1,this.clientForm.reset()}EditClient(t){this.isEditing=!0,this.clientForm.setValue({id:t.id,name:t.name,rfc:t.rfc,address:{id:t.addresses&&t.addresses.length?t.addresses[0].id:null,street:t.addresses&&t.addresses.length?t.addresses[0].street:null,externalNumber:t.addresses&&t.addresses.length?t.addresses[0].externalNumber:null,internalNumber:t.addresses&&t.addresses.length?t.addresses[0].internalNumber:null,city:t.addresses&&t.addresses.length?t.addresses[0].city:null,province:t.addresses&&t.addresses.length?t.addresses[0].province:null,country:t.addresses&&t.addresses.length?t.addresses[0].country:null,postalCode:t.addresses&&t.addresses.length?t.addresses[0].postalCode:null},utilityPercentage:t.utilityPercentage,paymentDays:t.paymentDays})}DeleteClient(){this.http.Delete(`Clients/${this.selectedClient.id}`,{}).subscribe(t=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente eliminado correctamente"),this.modal.CloseModal()},t=>{console.error("Error deleting client",t),this.toast.ShowDefaultDanger(this.http.GetErrorMessage(t)||"Error al eliminar cliente")})}DownloadTemplate(){this.http.DownloadFileWithoutApi("assets/templates/plantilla_clientes.csv","plantilla_clientes.csv")}OnFileSelected(t){const l=t.target.files[0];if(this.clientsCsv=l,!l)return;const o=new FileReader;o.onload=s=>{this.csv.ReadCSV(o.result).then(a=>{console.log(a.data),this.clientsToUpload=this.csv.FormatData(a.data,this.dataConversions).map(c=>({name:c.name,rfc:c.rfc,utilityPercentage:c.utilityPercentage,paymentDays:c.paymentDays,address:{street:c.street,externalNumber:c.externalNumber,internalNumber:c.internalNumber,postalCode:c.postalCode,city:c.city,province:c.province,country:c.country}})),console.log(this.clientsToUpload)})},o.readAsText(l,"ISO-8859-3")}GenerateClientAddress(t){return t.addresses.length?t.addresses[0].street+" #"+t.addresses[0].externalNumber+(t.addresses[0].internalNumber?" int. "+t.addresses[0].internalNumber:""):"Sin direccio\xf3n"}GenerateCsv(){let o=this.clients.map(s=>{var a,c,m;return{name:s.name,rfc:s.rfc,addressFormated:this.GenerateClientAddress(s),location:`${null===(a=s.addresses[0])||void 0===a?void 0:a.province}, ${null===(c=s.addresses[0])||void 0===c?void 0:c.country}`,country:null===(m=s.addresses[0])||void 0===m?void 0:m.country,utilityPercentage:s.utilityPercentage,paymentDays:s.paymentDays}});this.csv.GenerateCSV("clientes",o,["name","rfc","addressFormated","location","country","utilityPercentage","paymentDays"],["Nombre","RFC","Direcci\xf3n","Localidad","Pa\xeds","Porcentaje de utilidad","D\xedas de pago"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.o),e.Y36(v.Z),e.Y36(q.k),e.Y36(N.O),e.Y36(F.M),e.Y36(b.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-clients"]],decls:41,vars:4,consts:[[1,"content"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"zmdi","zmdi-home","zmdi-hc-lg","mr-2","clickeable",3,"click"],[1,"d-flex"],[1,"btn","btn-success","mx-1",3,"click"],[1,"zmdi","zmdi-plus-circle-o","zmdi-hc-lg","mr-2"],["id","csvClientsDropdown","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"clickeable","px-2"],[1,"btn","btn-success","mx-1"],[1,"zmdi","zmdi-file","zmdi-hc-lg","mr-2"],["aria-labelledby","csvClientsDropdown",1,"dropdown-menu","px-1","py-1"],[1,"menu-list"],[1,"d-flex","align-items-center","px-3","my-1","clickeable-hover",3,"click"],[1,"zmdi","zmdi-file-text"],[1,"pl-2"],[1,"zmdi","zmdi-file-plus"],[1,"zmdi","zmdi-download"],[1,"row","justify-content-center"],[1,"col-12","col-lg-11","mt-3","mb-4"],[3,"timerTrigger","filters","onSearch"],["class","col-12 col-lg-11",4,"ngIf","ngIfElse"],["bigLoading",""],["noClientsMessage",""],["addClientsByCsvModal",""],["deleteClientModal",""],["addOrEditClientModal",""],[1,"col-12","col-lg-11"],["class","table table-striped",4,"ngIf","ngIfElse"],[1,"table","table-striped"],[1,"table-thead"],[4,"ngFor","ngForOf"],[1,"d-flex","flex-column","justify-content-around",2,"gap","12px"],[1,"btn","btn-outline-primary",3,"click"],[1,"d-flex","align-items-center","justify-content-center"],[1,"zmdi","zmdi-edit","zmdi-hc-lg","clickeable","mx-2",3,"click"],[1,"zmdi","zmdi-delete","zmdi-hc-lg","clickeable","mx-2",3,"click"],[1,"col-12","w-100","h-75","d-flex","align-items-center","justify-content-center",2,"min-height","min-content"],[1,"zmdi","zmdi-spinner","zmdi-hc-5x","zmdi-hc-spin"],[1,"no-items-message"],[1,"modal-header"],[1,"modal-title"],[1,"close-modal-button","zmdi","zmdi-close-circle-o","zmdi-hc-2x","clickeable",3,"click"],[1,"modal-body"],[1,"d-flex","flex-column","justify-content-between"],["type","file","accept",".csv",1,"d-none",3,"change"],["csvFileInput",""],["class","modal-table",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"modal-table"],[1,"my-4","text-center",2,"font-size","1.25rem","font-weight","700"],[1,"table","table-danger","table-striped"],[1,"table-thead","bg-danger"],[1,"btn","btn-danger",3,"click"],[1,"w-100"],[3,"formGroup"],[1,"row"],[1,"col-12"],[1,"form-group"],[1,"text-danger"],[1,"input-container"],[1,"input-icon","zmdi","zmdi-account-o","zmdi-hc-lg"],["type","text","placeholder","Nombre del cliente","formControlName","name",1,"form-control",3,"keyup.enter"],["class","error-messages",4,"ngIf"],["type","text","placeholder","RFC del cliente","formControlName","rfc",1,"form-control",3,"keyup.enter"],[1,"col-12","px-0"],[1,"input-icon","zmdi","zmdi-home","zmdi-hc-lg"],["type","text","placeholder","Direcci\xf3n del cliente","formControlName","street",1,"form-control",3,"keyup.enter"],[1,"col-12","col-sm-6"],["type","text","placeholder","Numero exterior","formControlName","externalNumber",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Numero interior","formControlName","internalNumber",1,"form-control",3,"keyup.enter"],["type","text","placeholder","C\xf3digo posal del cliente","formControlName","postalCode",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-globe","zmdi-hc-lg"],["type","text","placeholder","Ciudad del cliente","formControlName","city",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Estado del cliente","formControlName","province",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Pa\xeds del cliente","formControlName","country",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-balance-wallet","zmdi-hc-lg"],["type","text","placeholder","Porcentaje de utilidad del cliente","formControlName","utilityPercentage",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-time-countdown","zmdi-hc-lg"],["type","text","placeholder","Dias de pago del cliente","formControlName","paymentDays",1,"form-control",3,"keyup.enter"],[1,"btn","btn-primary",3,"click"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"]],template:function(t,l){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"i",3),e.NdJ("click",function(){return l.GoHome()}),e.qZA(),e._uU(4," Mis clientes "),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(40);return l.modal.OpenModal(a)}),e._UZ(7,"i",6),e._uU(8," Agregar "),e.qZA(),e.TgZ(9,"div",7),e.TgZ(10,"button",8),e._UZ(11,"i",9),e._uU(12," CSV "),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.NdJ("click",function(){return l.DownloadTemplate()}),e._UZ(16,"i",13),e.TgZ(17,"span",14),e._uU(18,"Descargar plantilla"),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.NdJ("click",function(){e.CHM(o);const a=e.MAs(36);return l.modal.OpenModal(a)}),e._UZ(20,"i",15),e.TgZ(21,"span",14),e._uU(22,"Subir archivo"),e.qZA(),e.qZA(),e.TgZ(23,"div",12),e.NdJ("click",function(){return l.GenerateCsv()}),e._UZ(24,"i",16),e.TgZ(25,"span",14),e._uU(26,"Exportar clientes"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",17),e.TgZ(28,"div",18),e.TgZ(29,"app-filters",19),e.NdJ("onSearch",function(a){return l.GetClients(a)}),e.qZA(),e.qZA(),e.YNc(30,J,2,2,"div",20),e.qZA(),e.qZA(),e.YNc(31,I,2,0,"ng-template",null,21,e.W1O),e.YNc(33,G,3,0,"ng-template",null,22,e.W1O),e.YNc(35,z,20,5,"ng-template",null,23,e.W1O),e.YNc(37,Y,12,1,"ng-template",null,24,e.W1O),e.YNc(39,Te,122,15,"ng-template",null,25,e.W1O)}if(2&t){const o=e.MAs(32);e.xp6(29),e.Q6J("timerTrigger",!0)("filters",l.filters),e.xp6(1),e.Q6J("ngIf",!l.loading.getting)("ngIfElse",o)}},directives:[U.b,f.O5,f.sg,i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:["td[_ngcontent-%COMP%]{vertical-align:middle!important}"]}),n})()}];let Ae=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[i.u5,f.ez,A.O,h.F,i.UX,x.Bz.forChild(xe)]]}),n})()}}]);