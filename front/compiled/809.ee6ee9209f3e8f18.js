"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[809],{1809:(Z,g,i)=>{i.r(g),i.d(g,{LoginModule:()=>y});var c=i(6019),d=i(850),r=i(7537),o=i(1514),l=i(7754),a=i(822),p=i(6588),m=i(9299),f=i(6155);function h(t,u){1&t&&(o.TgZ(0,"span",23),o._uU(1," Email no valido "),o.qZA())}function _(t,u){1&t&&(o.TgZ(0,"span",23),o._uU(1," Favor de ingresar su email "),o.qZA())}function F(t,u){if(1&t&&(o.TgZ(0,"div",21),o.YNc(1,h,2,0,"span",22),o.YNc(2,_,2,0,"span",22),o.qZA()),2&t){const e=o.oxw();let n,s;o.xp6(1),o.Q6J("ngIf",null==(n=e.form.GetFormControlByName(e.loginForm,"email"))?null:n.errors.pattern),o.xp6(1),o.Q6J("ngIf",null==(s=e.form.GetFormControlByName(e.loginForm,"email"))?null:s.errors.required)}}function T(t,u){1&t&&(o.TgZ(0,"span",23),o._uU(1," Favor de ingresar su contrase\xf1a "),o.qZA())}function C(t,u){if(1&t&&(o.TgZ(0,"div",21),o.YNc(1,T,2,0,"span",22),o.qZA()),2&t){const e=o.oxw();let n;o.xp6(1),o.Q6J("ngIf",null==(n=e.form.GetFormControlByName(e.loginForm,"password"))?null:n.errors.required)}}const A=[{path:"",component:(()=>{class t{constructor(e,n,s,v,L,N){this.http=e,this.form=n,this.toast=s,this.router=v,this.role=L,this.nav=N,this.loginForm=new r.cw({email:new r.NI("",[r.kI.required,r.kI.email]),password:new r.NI("",[r.kI.required])})}ngOnInit(){this.role.GetUserRole()&&this.nav.GoToRoleRoute("")}Login(){if(!this.loginForm.valid)return this.loginForm.markAllAsTouched(),void this.toast.ShowDefaultWarning("Favor de llenar todos los campos","Formulario incompleto");this.http.Post("/Accounts/Login",{credentials:this.loginForm.value}).subscribe(e=>{this.SetUserSession(e),this.toast.ShowDefaultSuccess("Sesi\xf3n iniciada correctamente"),this.router.navigate([`/${e.role.name.toLowerCase()}/dashboard`])},e=>{console.error("Error al hacer login",e),this.toast.ShowDefaultDanger(this.http.GetErrorMessage(e)||"Error al eliminar cliente")})}SetUserSession(e){if(e){const n=e.token;delete e.token,localStorage.setItem("token",n.id),localStorage.setItem("user",JSON.stringify(e))}}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(l.O),o.Y36(a.o),o.Y36(p.k),o.Y36(d.F0),o.Y36(m.N),o.Y36(f.f))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],decls:28,vars:3,consts:[[1,"component-container"],[1,"vertical-center"],[1,"w-100"],[1,"row","justify-content-center"],[1,"col-12","col-md-8","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","email"],[1,"input-container"],[1,"input-icon","zmdi","zmdi-email","zmdi-hc-lg"],["type","text","placeholder","Correo","formControlName","email",1,"form-control",3,"keyup.enter"],["class","error-messages",4,"ngIf"],["for","password"],[1,"input-icon","zmdi","zmdi-lock","zmdi-hc-lg"],["type","password","placeholder","Contrase\xf1a","formControlName","password",1,"form-control",3,"keyup.enter"],[1,"card-footer","text-right"],[1,"btn","btn-primary",3,"click"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"]],template:function(e,n){if(1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o.TgZ(5,"div",5),o.TgZ(6,"div",6),o.TgZ(7,"h3",7),o._uU(8,"Login"),o.qZA(),o.qZA(),o.TgZ(9,"div",8),o.TgZ(10,"form",9),o.TgZ(11,"div",10),o.TgZ(12,"label",11),o._uU(13,"Email"),o.qZA(),o.TgZ(14,"div",12),o._UZ(15,"i",13),o.TgZ(16,"input",14),o.NdJ("keyup.enter",function(){return n.Login()}),o.qZA(),o.qZA(),o.YNc(17,F,3,2,"div",15),o.qZA(),o.TgZ(18,"div",10),o.TgZ(19,"label",16),o._uU(20,"Contrase\xf1a"),o.qZA(),o.TgZ(21,"div",12),o._UZ(22,"i",17),o.TgZ(23,"input",18),o.NdJ("keyup.enter",function(){return n.Login()}),o.qZA(),o.qZA(),o.YNc(24,C,2,1,"div",15),o.qZA(),o.qZA(),o.qZA(),o.TgZ(25,"div",19),o.TgZ(26,"button",20),o.NdJ("click",function(){return n.Login()}),o._uU(27," Iniciar sesi\xf3n "),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){let s,v;o.xp6(10),o.Q6J("formGroup",n.loginForm),o.xp6(7),o.Q6J("ngIf",(null==(s=n.form.GetFormControlByName(n.loginForm,"email"))?null:s.touched)&&(null==(s=n.form.GetFormControlByName(n.loginForm,"email"))?null:s.errors)),o.xp6(7),o.Q6J("ngIf",(null==(v=n.form.GetFormControlByName(n.loginForm,"password"))?null:v.touched)&&(null==(v=n.form.GetFormControlByName(n.loginForm,"password"))?null:v.errors))}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,c.O5],styles:[".component-container[_ngcontent-%COMP%]{height:91vh;width:100%;display:block;margin:0!important;padding:0;background:linear-gradient(0deg,#0096c0,#c2e6fd 75%)!important}.card[_ngcontent-%COMP%]{background-color:#fff8;box-shadow:none!important}.vertical-center[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center}"]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[r.u5,c.ez,r.UX,d.Bz.forChild(A)]]}),t})()},822:(Z,g,i)=>{i.d(g,{o:()=>d});var c=i(1514);let d=(()=>{class r{constructor(){}GetFormControlByName(l,a){return l.get(a)}BuildAddress(l,a){let p=`${l.street} #${l.externalNumber} ${l.internalNumber?`" int. ${l.internalNumber}`:""}`;return a&&(p+=""),p}ResetForm(l){l.reset()}}return r.\u0275fac=function(l){return new(l||r)},r.\u0275prov=c.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},6155:(Z,g,i)=>{i.d(g,{f:()=>l});var c=i(1514),d=i(850),r=i(9299),o=i(6588);let l=(()=>{class a{constructor(m,f,h){this.router=m,this.role=f,this.toast=h}FormatRoute(m){return"/"==m.charAt(0)?`${m.split("").slice(1).join("")}`:m}GoToRoleRoute(m){const f=this.role.GetUserRole();f?this.router.navigate([`/${f.toLowerCase()}/${this.FormatRoute(m)}`]):this.toast.ShowDefaultDanger("Rol de usuario no valido","Ruta invalida")}}return a.\u0275fac=function(m){return new(m||a)(c.LFG(d.F0),c.LFG(r.N),c.LFG(o.k))},a.\u0275prov=c.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()}}]);