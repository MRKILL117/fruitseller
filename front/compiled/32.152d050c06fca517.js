"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[32],{2032:(f,p,i)=>{i.r(p),i.d(p,{ClientAddressesModule:()=>R});var u=i(6019),g=i(850),l=i(7537),A=i(107),c=i(3550),_=i(5838),e=i(1514),x=i(6155),T=i(7754),v=i(6588),h=i(9853),N=i(822);function q(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().SetAsDefault(o)}),e._uU(1," Establecer como predeterminada "),e.qZA()}}function F(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.TgZ(2,"div",13),e.TgZ(3,"h2",14),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",15),e.TgZ(6,"div",16),e.TgZ(7,"div"),e._uU(8),e.qZA(),e.TgZ(9,"div"),e._uU(10),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.qZA(),e.TgZ(13,"div"),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",17),e.TgZ(16,"button",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(),m=e.MAs(14);return d.EnableEdition(a),d.modal.OpenModal(m)}),e._uU(17," Editar "),e.qZA(),e.TgZ(18,"button",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(),m=e.MAs(12);return d.selectedAddress=a,d.modal.OpenModal(m)}),e._uU(19," Eliminar "),e.qZA(),e.YNc(20,q,2,0,"button",20),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=s.$implicit,r=s.index,o=e.oxw();e.xp6(4),e.hij("Direcci\xf3n ",r+1,""),e.xp6(4),e.hij(" ",o.GenerateClientAddress(t)," "),e.xp6(2),e.hij(" ",t.postalCode," "),e.xp6(2),e.hij(" ",t.city+", "+t.province," "),e.xp6(2),e.hij(" ",t.country," "),e.xp6(6),e.Q6J("ngIf",!t.isDefault)}}function b(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",22),e.TgZ(1,"h2",23),e._uU(2,"Eliminar direcci\xf3n"),e.qZA(),e.TgZ(3,"i",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",25),e.TgZ(5,"div",4),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"div",26),e.TgZ(8,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().modal.CloseModal()}),e._uU(9," No, cancelar "),e.qZA(),e.TgZ(10,"button",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().Delete()}),e._uU(11," Si, eliminar "),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(6),e.hij(' \xbfEsta seguro que desea eliminar la direcci\xf3n "',t.GenerateClientAddress(t.selectedAddress),'"? ')}}function y(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Campo obligatorio "),e.qZA())}function k(n,s){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,y,2,0,"span",49),e.qZA()),2&n){const t=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.GetFormControlByName(t.addressForm,"street"))?null:r.errors.required)}}function I(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Campo obligatorio "),e.qZA())}function U(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function w(n,s){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,I,2,0,"span",49),e.YNc(2,U,2,0,"span",49),e.qZA()),2&n){const t=e.oxw(2);let r,o;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:o.errors.onlynumbers)}}function G(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Campo obligatorio "),e.qZA())}function J(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function E(n,s){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,G,2,0,"span",49),e.YNc(2,J,2,0,"span",49),e.qZA()),2&n){const t=e.oxw(2);let r,o;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:o.errors.onlynumbers)}}function M(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Campo obligatorio "),e.qZA())}function B(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Solo n\xfameros enteros "),e.qZA())}function Y(n,s){if(1&n&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let r;e.xp6(1),e.hij(" M\xednimo ",null==(r=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:r.errors.minlength.requiredLength," caracteres ")}}function D(n,s){if(1&n&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let r;e.xp6(1),e.hij(" M\xe1ximo ",null==(r=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:r.errors.maxlength.requiredLength," caracteres ")}}function S(n,s){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,M,2,0,"span",49),e.YNc(2,B,2,0,"span",49),e.YNc(3,Y,2,1,"span",49),e.YNc(4,D,2,1,"span",49),e.qZA()),2&n){const t=e.oxw(2);let r,o,a,d;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:r.errors.required),e.xp6(1),e.Q6J("ngIf",null==(o=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:o.errors.onlynumbers),e.xp6(1),e.Q6J("ngIf",null==(a=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:a.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==(d=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:d.errors.maxlength)}}function z(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Campo obligatorio "),e.qZA())}function Q(n,s){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,z,2,0,"span",49),e.qZA()),2&n){const t=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.GetFormControlByName(t.addressForm,"city"))?null:r.errors.required)}}function H(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Campo obligatorio "),e.qZA())}function O(n,s){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,H,2,0,"span",49),e.qZA()),2&n){const t=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.GetFormControlByName(t.addressForm,"province"))?null:r.errors.required)}}function j(n,s){1&n&&(e.TgZ(0,"span",50),e._uU(1," Campo obligatorio "),e.qZA())}function $(n,s){if(1&n&&(e.TgZ(0,"div",48),e.YNc(1,j,2,0,"span",49),e.qZA()),2&n){const t=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",null==(r=t.form.GetFormControlByName(t.addressForm,"country"))?null:r.errors.required)}}function P(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",22),e.TgZ(1,"h2",23),e._uU(2),e.qZA(),e.TgZ(3,"i",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().CancelEdition()}),e.qZA(),e.qZA(),e.TgZ(4,"div",25),e.TgZ(5,"div",28),e.TgZ(6,"form",29),e.TgZ(7,"div",30),e.TgZ(8,"div",31),e.TgZ(9,"form",29),e.TgZ(10,"div",30),e.TgZ(11,"div",32),e.TgZ(12,"div",33),e.TgZ(13,"label"),e._uU(14,"Direcci\xf3n "),e.TgZ(15,"span",34),e._uU(16,"*"),e.qZA(),e.qZA(),e.TgZ(17,"div",35),e._UZ(18,"i",36),e.TgZ(19,"input",37),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().Create()}),e.qZA(),e.qZA(),e.YNc(20,k,2,1,"div",38),e.qZA(),e.qZA(),e.TgZ(21,"div",39),e.TgZ(22,"div",33),e.TgZ(23,"label"),e._uU(24,"N\xfamero exterior "),e.TgZ(25,"span",34),e._uU(26,"*"),e.qZA(),e.qZA(),e.TgZ(27,"div",35),e._UZ(28,"i",36),e.TgZ(29,"input",40),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().Create()}),e.qZA(),e.qZA(),e.YNc(30,w,3,2,"div",38),e.qZA(),e.qZA(),e.TgZ(31,"div",39),e.TgZ(32,"div",33),e.TgZ(33,"label"),e._uU(34,"N\xfamero interior"),e.qZA(),e.TgZ(35,"div",35),e._UZ(36,"i",36),e.TgZ(37,"input",41),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().Create()}),e.qZA(),e.qZA(),e.YNc(38,E,3,2,"div",38),e.qZA(),e.qZA(),e.TgZ(39,"div",39),e.TgZ(40,"div",33),e.TgZ(41,"label"),e._uU(42,"C\xf3digo postal "),e.TgZ(43,"span",34),e._uU(44,"*"),e.qZA(),e.qZA(),e.TgZ(45,"div",35),e._UZ(46,"i",36),e.TgZ(47,"input",42),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().Create()}),e.qZA(),e.qZA(),e.YNc(48,S,5,4,"div",38),e.qZA(),e.qZA(),e.TgZ(49,"div",39),e.TgZ(50,"div",33),e.TgZ(51,"label"),e._uU(52,"Ciudad "),e.TgZ(53,"span",34),e._uU(54,"*"),e.qZA(),e.qZA(),e.TgZ(55,"div",35),e._UZ(56,"i",43),e.TgZ(57,"input",44),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().Create()}),e.qZA(),e.qZA(),e.YNc(58,Q,2,1,"div",38),e.qZA(),e.qZA(),e.TgZ(59,"div",39),e.TgZ(60,"div",33),e.TgZ(61,"label"),e._uU(62,"Estado "),e.TgZ(63,"span",34),e._uU(64,"*"),e.qZA(),e.qZA(),e.TgZ(65,"div",35),e._UZ(66,"i",43),e.TgZ(67,"input",45),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().Create()}),e.qZA(),e.qZA(),e.YNc(68,O,2,1,"div",38),e.qZA(),e.qZA(),e.TgZ(69,"div",39),e.TgZ(70,"div",33),e.TgZ(71,"label"),e._uU(72,"Pa\xeds "),e.TgZ(73,"span",34),e._uU(74,"*"),e.qZA(),e.qZA(),e.TgZ(75,"div",35),e._UZ(76,"i",43),e.TgZ(77,"input",46),e.NdJ("keyup.enter",function(){return e.CHM(t),e.oxw().Create()}),e.qZA(),e.qZA(),e.YNc(78,$,2,1,"div",38),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(79,"div",26),e.TgZ(80,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().CancelEdition()}),e._uU(81," Cancelar "),e.qZA(),e.TgZ(82,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw().Create()}),e._uU(83),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();let r,o,a,d,m,Z,C;e.xp6(2),e.Oqu(t.isEditing?"Actualizar direcci\xf3n":"Agregar una direcci\xf3n"),e.xp6(4),e.Q6J("formGroup",t.addressForm),e.xp6(3),e.Q6J("formGroup",t.addressForm),e.xp6(11),e.Q6J("ngIf",(null==(r=t.form.GetFormControlByName(t.addressForm,"street"))?null:r.touched)&&(null==(r=t.form.GetFormControlByName(t.addressForm,"street"))?null:r.errors)),e.xp6(10),e.Q6J("ngIf",(null==(o=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:o.touched)&&(null==(o=t.form.GetFormControlByName(t.addressForm,"externalNumber"))?null:o.errors)),e.xp6(8),e.Q6J("ngIf",(null==(a=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:a.touched)&&(null==(a=t.form.GetFormControlByName(t.addressForm,"internalNumber"))?null:a.errors)),e.xp6(10),e.Q6J("ngIf",(null==(d=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:d.touched)&&(null==(d=t.form.GetFormControlByName(t.addressForm,"postalCode"))?null:d.errors)),e.xp6(10),e.Q6J("ngIf",(null==(m=t.form.GetFormControlByName(t.addressForm,"city"))?null:m.touched)&&(null==(m=t.form.GetFormControlByName(t.addressForm,"city"))?null:m.errors)),e.xp6(10),e.Q6J("ngIf",(null==(Z=t.form.GetFormControlByName(t.addressForm,"province"))?null:Z.touched)&&(null==(Z=t.form.GetFormControlByName(t.addressForm,"province"))?null:Z.errors)),e.xp6(10),e.Q6J("ngIf",(null==(C=t.form.GetFormControlByName(t.addressForm,"country"))?null:C.touched)&&(null==(C=t.form.GetFormControlByName(t.addressForm,"country"))?null:C.errors)),e.xp6(5),e.hij(" ",t.isEditing?"Actualizar":"Agregar"," ")}}const L=[{path:"",component:(()=>{class n{constructor(t,r,o,a,d,m){this.nav=t,this.http=r,this.toast=o,this.modal=a,this.form=d,this.activatedRoute=m,this.clientId=null,this.addresses=[],this.selectedAddress=null,this.isEditing=!1,this.loading={getting:!1,updating:!1},this.addressForm=new l.cw({id:new l.NI(null,[]),street:new l.NI("",[l.kI.required]),externalNumber:new l.NI("",[l.kI.required,(0,_.wp)()]),internalNumber:new l.NI(null,[(0,_.wp)()]),city:new l.NI("",[l.kI.required]),province:new l.NI("",[l.kI.required]),country:new l.NI("",[l.kI.required]),postalCode:new l.NI("",[l.kI.required,l.kI.minLength(5),l.kI.maxLength(5),(0,_.wp)()]),clientId:new l.NI(null,[l.kI.required])})}ngOnInit(){this.GetParams()}GetParams(){this.activatedRoute.params.subscribe(t=>{var r;this.clientId=t.clientId,null===(r=this.addressForm.get("clientId"))||void 0===r||r.setValue(this.clientId),this.GetAddresses()})}GoBack(){this.nav.GoToRoleRoute("clients")}GenerateClientAddress(t){return t.street+" #"+t.externalNumber+(t.internalNumber?" int. "+t.internalNumber:"")}GetAddresses(){this.http.Get(`Addresses/OfClient/${this.clientId}`).subscribe(t=>{this.addresses=t},t=>{console.error("Error getting client addresses")})}Create(){if(this.addressForm.invalid)return this.addressForm.markAllAsTouched(),void this.toast.ShowDefaultWarning("Favor de llenar los campos obligatorios");this.isEditing?this.Update():this.http.Post("Addresses",{address:this.addressForm.value}).subscribe(t=>{this.GetAddresses(),this.toast.ShowDefaultSuccess("Direcci\xf3n creada exitosamente"),this.addressForm.reset(),this.modal.CloseModal()},t=>{this.toast.ShowDefaultDanger("Error al crear direcci\xf3n"),console.error("Error creating address",t)})}Update(){this.http.Patch("Addresses",{address:this.addressForm.value}).subscribe(r=>{this.GetAddresses(),this.toast.ShowDefaultSuccess("Direcci\xf3n actualizada con \xe9xito"),this.modal.CloseModal(),this.isEditing=!1},r=>{console.error("Error patching address",r),this.toast.ShowDefaultDanger("Error al actualizar direcci\xf3n")})}CancelEdition(){this.modal.CloseModal(this.loading.updating),this.isEditing=!1,this.addressForm.reset()}EnableEdition(t){this.isEditing=!0,this.addressForm.setValue({id:t.id?t.id:null,street:t.street?t.street:null,externalNumber:t.externalNumber?t.externalNumber:null,internalNumber:t.internalNumber?t.internalNumber:null,city:t.city?t.city:null,province:t.province?t.province:null,country:t.country?t.country:null,postalCode:t.postalCode?t.postalCode:null,clientId:t.clientId?t.clientId:null})}Delete(){this.http.Delete(`Addresses/${this.selectedAddress.id}`,{}).subscribe(t=>{this.GetAddresses(),this.toast.ShowDefaultSuccess("Direcci\xf3n eliminada correctamente"),this.modal.CloseModal()},t=>{console.error("Error deleting address",t),this.toast.ShowDefaultDanger("Error al eliminar direcci\xf3n")})}SetAsDefault(t){this.http.Patch(`Addresses/${t.id}/SetAsDefault`,{}).subscribe(r=>{this.toast.ShowDefaultSuccess("Direcci\xf3n establecida como predeterminada"),this.GetAddresses()},r=>{console.error("Error setting as default",r)})}ResetForm(){var t;this.addressForm.reset(),null===(t=this.addressForm.get("clientId"))||void 0===t||t.setValue(this.clientId)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(x.f),e.Y36(T.O),e.Y36(v.k),e.Y36(h.Z),e.Y36(N.o),e.Y36(g.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-client-addresses"]],decls:15,vars:1,consts:[[1,"content"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"zmdi","zmdi-arrow-back","zmdi-hc-lg","mr-2","clickeable",3,"click"],[1,"d-flex"],[1,"btn","btn-success","mx-1",3,"click"],[1,"zmdi","zmdi-plus-circle-o","zmdi-hc-lg","mr-2"],[1,"row","mt-5"],["class","col-12 col-md-6 col-xl-4 mb-4",4,"ngFor","ngForOf"],["deleteAddressModal",""],["addOrEditAddressModal",""],[1,"col-12","col-md-6","col-xl-4","mb-4"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"d-flex","flex-column"],[1,"card-footer","d-flex","flex-column",2,"gap","12px"],[1,"btn","btn-warning",3,"click"],[1,"btn","btn-danger",3,"click"],["class","btn btn-info",3,"click",4,"ngIf"],[1,"btn","btn-info",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"close-modal-button","zmdi","zmdi-close-circle-o","zmdi-hc-2x","clickeable",3,"click"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[1,"w-100"],[3,"formGroup"],[1,"row"],[1,"col-12","px-0"],[1,"col-12"],[1,"form-group"],[1,"text-danger"],[1,"input-container"],[1,"input-icon","zmdi","zmdi-home","zmdi-hc-lg"],["type","text","placeholder","Calle","formControlName","street",1,"form-control",3,"keyup.enter"],["class","error-messages",4,"ngIf"],[1,"col-12","col-sm-6"],["type","text","placeholder","Numero exterior","formControlName","externalNumber",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Numero interior","formControlName","internalNumber",1,"form-control",3,"keyup.enter"],["type","text","placeholder","C\xf3digo posal","formControlName","postalCode",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-globe","zmdi-hc-lg"],["type","text","placeholder","Ciudad","formControlName","city",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Estado","formControlName","province",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Pa\xeds","formControlName","country",1,"form-control",3,"keyup.enter"],[1,"btn","btn-primary",3,"click"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"]],template:function(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"i",3),e.NdJ("click",function(){return r.GoBack()}),e.qZA(),e._uU(4," Direcciones "),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"button",5),e.NdJ("click",function(){e.CHM(o);const d=e.MAs(14);return r.modal.OpenModal(d)}),e._UZ(7,"i",6),e._uU(8," Agregar "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",7),e.YNc(10,F,21,6,"div",8),e.qZA(),e.qZA(),e.YNc(11,b,12,1,"ng-template",null,9,e.W1O),e.YNc(13,P,84,11,"ng-template",null,10,e.W1O)}2&t&&(e.xp6(10),e.Q6J("ngForOf",r.addresses))},directives:[u.sg,u.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u],styles:[""]}),n})()}];let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[l.u5,u.ez,A.O,c.F,l.UX,g.Bz.forChild(L)]]}),n})()},822:(f,p,i)=>{i.d(p,{o:()=>g});var u=i(1514);let g=(()=>{class l{constructor(){}GetFormControlByName(c,_){return c.get(_)}BuildAddress(c,_){let e=`${c.street} #${c.externalNumber} ${c.internalNumber?`" int. ${c.internalNumber}`:""}`;return _&&(e+=""),e}}return l.\u0275fac=function(c){return new(c||l)},l.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);