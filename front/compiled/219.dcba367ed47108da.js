"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[219],{1219:(pt,Z,a)=>{a.r(Z),a.d(Z,{ClientsModule:()=>mt});var d=a(6019),C=a(850),r=a(7537),f=a(107),T=a(3550),g=a(5838),t=a(1514),x=a(822),h=a(9853),A=a(6588),q=a(7754),v=a(1843),y=a(6155),F=a(5749);function N(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t.TgZ(16,"div",30),t.TgZ(17,"i",31),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(3),_=t.MAs(33);return s.EditClient(c),s.modal.OpenModal(_)}),t.qZA(),t.TgZ(18,"i",32),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(3),_=t.MAs(31);return s.selectedClient=c,s.modal.OpenModal(_)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.rfc),t.xp6(2),t.Oqu(e.address),t.xp6(2),t.Oqu(e.postalCode),t.xp6(2),t.Oqu(e.state+", "+e.country),t.xp6(2),t.Oqu(e.utilityPercentage+"%"),t.xp6(2),t.Oqu(e.paymentDays?e.paymentDays:"N/A")}}function U(n,i){if(1&n&&(t.TgZ(0,"div",26),t.TgZ(1,"table",27),t.TgZ(2,"thead",28),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"Nombre"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"RFC"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Direccion"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"CP"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Localidad"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"% utiliad"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"D\xedas de pago"),t.qZA(),t._UZ(18,"th"),t.qZA(),t.qZA(),t.TgZ(19,"tbody"),t.YNc(20,N,19,7,"tr",29),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(20),t.Q6J("ngForOf",e.clients)}}const b=function(){return{text:!0,startDate:!1,endDate:!1,options:null}};function w(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",22),t.TgZ(1,"div",23),t.TgZ(2,"app-filters",24),t.NdJ("onSearch",function(o){return t.CHM(e),t.oxw().GetClients(o)}),t.qZA(),t.qZA(),t.YNc(3,U,21,1,"div",25),t.qZA()}if(2&n){const e=t.oxw(),l=t.MAs(27);t.xp6(2),t.Q6J("timerTrigger",!0)("filters",t.DdM(4,b)),t.xp6(1),t.Q6J("ngIf",!(null==e.clients||!e.clients.length))("ngIfElse",l)}}function k(n,i){1&n&&(t.TgZ(0,"div",33),t._UZ(1,"i",34),t.qZA())}function J(n,i){1&n&&(t.TgZ(0,"div",26),t.TgZ(1,"div",35),t._uU(2," No tiene clientes registrados "),t.qZA(),t.qZA())}function I(n,i){if(1&n&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.xp6(2),t.Oqu(e.client.name),t.xp6(2),t.Oqu(e.client.rfc),t.xp6(2),t.Oqu(e.reason?e.reason:"Error al crear")}}function M(n,i){if(1&n&&(t.TgZ(0,"div",49),t.TgZ(1,"div",50),t._uU(2," Error al crear clientes "),t.qZA(),t.TgZ(3,"table",51),t.TgZ(4,"thead",52),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7,"Nombre"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"RFC"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Motivo"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"tbody"),t.YNc(13,I,7,3,"tr",29),t.qZA(),t.qZA(),t.qZA()),2&n){const e=t.oxw(2);t.xp6(13),t.Q6J("ngForOf",e.clientsFailed)}}function D(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Cancelar"),t.qZA())}function E(n,i){1&n&&(t.TgZ(0,"span"),t._uU(1,"Cerrar"),t.qZA())}function z(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",36),t.TgZ(1,"h2",37),t._uU(2,"Agregar por CSV"),t.qZA(),t.TgZ(3,"i",38),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return o.modal.CloseModal(o.loading.updating)}),t.qZA(),t.qZA(),t.TgZ(4,"div",39),t.TgZ(5,"div",40),t.TgZ(6,"div",1),t.TgZ(7,"button",41),t.NdJ("click",function(){return t.CHM(e),t.MAs(12).click()}),t._uU(8," Seleccionar archivo "),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.qZA(),t.TgZ(11,"input",42,43),t.NdJ("change",function(o){return t.CHM(e),t.oxw().OnFileSelected(o)}),t.qZA(),t.qZA(),t.YNc(13,M,14,1,"div",44),t.qZA(),t.qZA(),t.TgZ(14,"div",45),t.TgZ(15,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().modal.CloseModal()}),t.YNc(16,D,2,0,"span",47),t.YNc(17,E,2,0,"span",47),t.qZA(),t.TgZ(18,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().RegisterClients()}),t._uU(19),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(10),t.hij(" ",null==e.clientsCsv?null:e.clientsCsv.name," "),t.xp6(3),t.Q6J("ngIf",!(null==e.clientsFailed||!e.clientsFailed.length)),t.xp6(3),t.Q6J("ngIf",!(null!=e.clientsFailed&&e.clientsFailed.length)),t.xp6(1),t.Q6J("ngIf",!(null==e.clientsFailed||!e.clientsFailed.length)),t.xp6(2),t.hij(" ",e.csvAcceptLabel," ")}}function G(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",36),t.TgZ(1,"h2",37),t._uU(2,"Eliminar cliente"),t.qZA(),t.TgZ(3,"i",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().modal.CloseModal()}),t.qZA(),t.qZA(),t.TgZ(4,"div",39),t.TgZ(5,"div",4),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",45),t.TgZ(8,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().modal.CloseModal()}),t._uU(9," No, cancelar "),t.qZA(),t.TgZ(10,"button",53),t.NdJ("click",function(){return t.CHM(e),t.oxw().DeleteClient()}),t._uU(11," Si, eliminar "),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();t.xp6(6),t.hij(' \xbfEsta seguro que desea eliminar a "',null==e.selectedClient?null:e.selectedClient.name,'"? ')}}function Y(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function B(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,Y,2,0,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"name"))?null:l.errors.required)}}function S(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function O(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Valor con formato inv\xe1lido "),t.qZA())}function Q(n,i){if(1&n&&(t.TgZ(0,"span",79),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);let l;t.xp6(1),t.hij(" M\xednimo ",null==(l=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:l.errors.minlength.requiredLength," caracteres ")}}function H(n,i){if(1&n&&(t.TgZ(0,"span",79),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);let l;t.xp6(1),t.hij(" M\xe1ximo ",null==(l=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:l.errors.maxlength.requiredLength," caracteres ")}}function R(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,S,2,0,"span",78),t.YNc(2,O,2,0,"span",78),t.YNc(3,Q,2,1,"span",78),t.YNc(4,H,2,1,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l,o,c,s;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"rfc"))?null:l.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.form.GetFormControlByName(e.clientForm,"rfc"))?null:o.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==(c=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:c.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(s=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:s.errors.maxlength)}}function j(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function P(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,j,2,0,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"address"))?null:l.errors.required)}}function K(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function L(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Solo n\xfameros enteros "),t.qZA())}function W(n,i){if(1&n&&(t.TgZ(0,"span",79),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);let l;t.xp6(1),t.hij(" M\xednimo ",null==(l=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:l.errors.minlength.requiredLength," caracteres ")}}function $(n,i){if(1&n&&(t.TgZ(0,"span",79),t._uU(1),t.qZA()),2&n){const e=t.oxw(3);let l;t.xp6(1),t.hij(" M\xe1ximo ",null==(l=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:l.errors.maxlength.requiredLength," caracteres ")}}function V(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,K,2,0,"span",78),t.YNc(2,L,2,0,"span",78),t.YNc(3,W,2,1,"span",78),t.YNc(4,$,2,1,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l,o,c,s;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:l.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:o.errors.onlynumbers),t.xp6(1),t.Q6J("ngIf",null==(c=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:c.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==(s=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:s.errors.maxlength)}}function X(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function tt(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,X,2,0,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"state"))?null:l.errors.required)}}function et(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function nt(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,et,2,0,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"country"))?null:l.errors.required)}}function lt(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function ot(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Solo n\xfameros "),t.qZA())}function it(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,lt,2,0,"span",78),t.YNc(2,ot,2,0,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l,o;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"utilityPercentage"))?null:l.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.form.GetFormControlByName(e.clientForm,"utilityPercentage"))?null:o.errors.onlynumbers)}}function rt(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Campo obligatorio "),t.qZA())}function ct(n,i){1&n&&(t.TgZ(0,"span",79),t._uU(1," Solo n\xfameros "),t.qZA())}function st(n,i){if(1&n&&(t.TgZ(0,"div",77),t.YNc(1,rt,2,0,"span",78),t.YNc(2,ct,2,0,"span",78),t.qZA()),2&n){const e=t.oxw(2);let l,o;t.xp6(1),t.Q6J("ngIf",null==(l=e.form.GetFormControlByName(e.clientForm,"paymentDays"))?null:l.errors.required),t.xp6(1),t.Q6J("ngIf",null==(o=e.form.GetFormControlByName(e.clientForm,"paymentDays"))?null:o.errors.onlynumbers)}}function at(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",36),t.TgZ(1,"h2",37),t._uU(2),t.qZA(),t.TgZ(3,"i",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().CancelEdition()}),t.qZA(),t.qZA(),t.TgZ(4,"div",39),t.TgZ(5,"div",54),t.TgZ(6,"form",55),t.TgZ(7,"div",56),t.TgZ(8,"div",57),t.TgZ(9,"div",58),t.TgZ(10,"label"),t._uU(11,"Nombre "),t.TgZ(12,"span",59),t._uU(13,"*"),t.qZA(),t.qZA(),t.TgZ(14,"div",60),t._UZ(15,"i",61),t.TgZ(16,"input",62),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(17,B,2,1,"div",63),t.qZA(),t.qZA(),t.TgZ(18,"div",57),t.TgZ(19,"div",58),t.TgZ(20,"label"),t._uU(21,"RFC "),t.TgZ(22,"span",59),t._uU(23,"*"),t.qZA(),t.qZA(),t.TgZ(24,"div",60),t._UZ(25,"i",61),t.TgZ(26,"input",64),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(27,R,5,4,"div",63),t.qZA(),t.qZA(),t.TgZ(28,"div",65),t.TgZ(29,"div",58),t.TgZ(30,"label"),t._uU(31,"Direcci\xf3n "),t.TgZ(32,"span",59),t._uU(33,"*"),t.qZA(),t.qZA(),t.TgZ(34,"div",60),t._UZ(35,"i",66),t.TgZ(36,"input",67),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(37,P,2,1,"div",63),t.qZA(),t.qZA(),t.TgZ(38,"div",65),t.TgZ(39,"div",58),t.TgZ(40,"label"),t._uU(41,"C\xf3digo postal "),t.TgZ(42,"span",59),t._uU(43,"*"),t.qZA(),t.qZA(),t.TgZ(44,"div",60),t._UZ(45,"i",66),t.TgZ(46,"input",68),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(47,V,5,4,"div",63),t.qZA(),t.qZA(),t.TgZ(48,"div",65),t.TgZ(49,"div",58),t.TgZ(50,"label"),t._uU(51,"Estado "),t.TgZ(52,"span",59),t._uU(53,"*"),t.qZA(),t.qZA(),t.TgZ(54,"div",60),t._UZ(55,"i",69),t.TgZ(56,"input",70),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(57,tt,2,1,"div",63),t.qZA(),t.qZA(),t.TgZ(58,"div",65),t.TgZ(59,"div",58),t.TgZ(60,"label"),t._uU(61,"Pa\xeds "),t.TgZ(62,"span",59),t._uU(63,"*"),t.qZA(),t.qZA(),t.TgZ(64,"div",60),t._UZ(65,"i",69),t.TgZ(66,"input",71),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(67,nt,2,1,"div",63),t.qZA(),t.qZA(),t.TgZ(68,"div",65),t.TgZ(69,"div",58),t.TgZ(70,"label"),t._uU(71,"Porcentaje de utilidad "),t.TgZ(72,"span",59),t._uU(73,"*"),t.qZA(),t.qZA(),t.TgZ(74,"div",60),t._UZ(75,"i",72),t.TgZ(76,"input",73),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(77,it,3,2,"div",63),t.qZA(),t.qZA(),t.TgZ(78,"div",65),t.TgZ(79,"div",58),t.TgZ(80,"label"),t._uU(81,"Dias de pago"),t.qZA(),t.TgZ(82,"div",60),t._UZ(83,"i",74),t.TgZ(84,"input",75),t.NdJ("keyup.enter",function(){return t.CHM(e),t.oxw().RegisterClient()}),t.qZA(),t.qZA(),t.YNc(85,st,3,2,"div",63),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(86,"div",45),t.TgZ(87,"button",46),t.NdJ("click",function(){return t.CHM(e),t.oxw().CancelEdition()}),t._uU(88," Cancelar "),t.qZA(),t.TgZ(89,"button",76),t.NdJ("click",function(){return t.CHM(e),t.oxw().RegisterClient()}),t._uU(90),t.qZA(),t.qZA()}if(2&n){const e=t.oxw();let l,o,c,s,_,m,p,u;t.xp6(2),t.Oqu(e.isEditing?"Actualizar cliente":"Agregar un cliente"),t.xp6(4),t.Q6J("formGroup",e.clientForm),t.xp6(11),t.Q6J("ngIf",(null==(l=e.form.GetFormControlByName(e.clientForm,"name"))?null:l.touched)&&(null==(l=e.form.GetFormControlByName(e.clientForm,"name"))?null:l.errors)),t.xp6(10),t.Q6J("ngIf",(null==(o=e.form.GetFormControlByName(e.clientForm,"rfc"))?null:o.touched)&&(null==(o=e.form.GetFormControlByName(e.clientForm,"rfc"))?null:o.errors)),t.xp6(10),t.Q6J("ngIf",(null==(c=e.form.GetFormControlByName(e.clientForm,"address"))?null:c.touched)&&(null==(c=e.form.GetFormControlByName(e.clientForm,"address"))?null:c.errors)),t.xp6(10),t.Q6J("ngIf",(null==(s=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:s.touched)&&(null==(s=e.form.GetFormControlByName(e.clientForm,"postalCode"))?null:s.errors)),t.xp6(10),t.Q6J("ngIf",(null==(_=e.form.GetFormControlByName(e.clientForm,"state"))?null:_.touched)&&(null==(_=e.form.GetFormControlByName(e.clientForm,"state"))?null:_.errors)),t.xp6(10),t.Q6J("ngIf",(null==(m=e.form.GetFormControlByName(e.clientForm,"country"))?null:m.touched)&&(null==(m=e.form.GetFormControlByName(e.clientForm,"country"))?null:m.errors)),t.xp6(10),t.Q6J("ngIf",(null==(p=e.form.GetFormControlByName(e.clientForm,"utilityPercentage"))?null:p.touched)&&(null==(p=e.form.GetFormControlByName(e.clientForm,"utilityPercentage"))?null:p.errors)),t.xp6(8),t.Q6J("ngIf",(null==(u=e.form.GetFormControlByName(e.clientForm,"paymentDays"))?null:u.touched)&&(null==(u=e.form.GetFormControlByName(e.clientForm,"paymentDays"))?null:u.errors)),t.xp6(5),t.hij(" ",e.isEditing?"Actualizar":"Agregar"," ")}}const _t=[{path:"",component:(()=>{class n{constructor(e,l,o,c,s,_){this.form=e,this.modal=l,this.toast=o,this.http=c,this.csv=s,this.nav=_,this.clients=[],this.selectedClient=null,this.isEditing=!1,this.clientsToUpload=[],this.clientsFailed=[],this.loading={updating:!1,getting:!0},this.clientForm=new r.cw({id:new r.NI(null,[]),name:new r.NI("",[r.kI.required]),rfc:new r.NI("",[r.kI.required,r.kI.pattern(/[A-Za-z0-9]{12,13}/)]),address:new r.NI("",[r.kI.required]),state:new r.NI("",[r.kI.required]),country:new r.NI("",[r.kI.required]),postalCode:new r.NI("",[r.kI.required,r.kI.minLength(5),r.kI.maxLength(5),(0,g.wp)()]),utilityPercentage:new r.NI("",[r.kI.required,(0,g.wp)()]),paymentDays:new r.NI("",[(0,g.wp)()])}),this.dataConversions=[{oldKey:"Nombre",newKey:"name"},{oldKey:"RFC",newKey:"rfc"},{oldKey:"Direcci\xf3n",newKey:"address"},{oldKey:"C\xf3digo postal",newKey:"postalCode"},{oldKey:"Estado",newKey:"state"},{oldKey:"Pa\xeds",newKey:"country"},{oldKey:"Porcentaje de utilidad",newKey:"utilityPercentage"},{oldKey:"D\xedas de pago",newKey:"paymentDays"}]}get csvAcceptLabel(){return this.clientsFailed.length?"Reintentar":"Subir"}ngOnInit(){this.GetClients()}GoHome(){this.nav.GoToRoleRoute("")}GetClients(e=null){this.loading.getting=!0;let l="/Clients";e&&(l+=`/FilteredBy/Text/${e.text}`),this.http.Get(l).subscribe(o=>{this.clients=o,this.loading.getting=!1},o=>{console.error("Error getting clients",o),this.loading.getting=!1})}RegisterClient(){if(this.clientForm.invalid)return this.clientForm.markAllAsTouched(),void this.toast.ShowDefaultWarning("Favor de llenar los campos obligatorios");this.isEditing?this.UpdateClient():this.http.Post("Clients",{client:this.clientForm.value}).subscribe(e=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente creado exitosamente"),this.clientForm.reset(),this.modal.CloseModal()},e=>{this.toast.ShowDefaultDanger("Error al crear cliente"),console.error("Error creating client",e)})}RegisterClients(){this.http.Post("Clients/Array",{clients:this.clientsToUpload}).subscribe(e=>{this.clientsFailed=e.clientsFailed,e.clientsSuccess.length&&this.toast.ShowDefaultSuccess(`${e.clientsSuccess.length} clientes creados correctamente`),e.clientsFailed.length?this.toast.ShowDefaultWarning(`${e.clientsFailed.length} clientes no se pudieron crear`):(this.modal.CloseModal(),this.clientsToUpload=[]),this.GetClients()},e=>{console.error("Error creating clients",e),this.toast.ShowDefaultDanger("Error al crear clientes")})}UpdateClient(){this.http.Patch("Clients",{client:this.clientForm.value}).subscribe(l=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente actualizado con \xe9xito"),this.modal.CloseModal(),this.isEditing=!1},l=>{console.error("Error patching client",l),this.toast.ShowDefaultDanger("Error al actualizar cliente")})}CancelEdition(){this.modal.CloseModal(this.loading.updating),this.isEditing=!1,this.clientForm.reset()}EditClient(e){this.isEditing=!0;for(const l in this.clientForm.controls)Object.prototype.hasOwnProperty.call(this.clientForm.controls,l)&&this.clientForm.controls[l].setValue(e[l])}DeleteClient(){this.http.Delete(`Clients/${this.selectedClient.id}`,{}).subscribe(e=>{this.GetClients(),this.toast.ShowDefaultSuccess("Cliente eliminado correctamente"),this.modal.CloseModal()},e=>{console.error("Error deleting client",e),this.toast.ShowDefaultDanger("Error al eliminar cliente")})}DownloadTemplate(){this.http.DownloadFileWithoutApi("assets/templates/plantilla_clientes.csv","plantilla_clientes.csv")}OnFileSelected(e){const l=e.target.files[0];if(this.clientsCsv=l,!l)return;const o=new FileReader;o.onload=c=>{this.csv.ReadCSV(o.result).then(s=>{this.clientsToUpload=this.FormatData(s.data)})},o.readAsText(l,"ISO-8859-3")}FormatData(e){return e.map(l=>{let o={};return this.dataConversions.forEach(c=>{o[c.newKey]=l[c.oldKey]}),o})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(x.o),t.Y36(h.Z),t.Y36(A.k),t.Y36(q.O),t.Y36(v.M),t.Y36(y.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-clients"]],decls:34,vars:2,consts:[[1,"content"],[1,"d-flex","align-items-center","justify-content-between"],[1,"page-title"],[1,"zmdi","zmdi-home","zmdi-hc-lg","mr-2","clickeable",3,"click"],[1,"d-flex"],[1,"btn","btn-success","mx-1",3,"click"],[1,"zmdi","zmdi-plus-circle-o","zmdi-hc-lg","mr-2"],["id","csvClientsDropdown","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"clickeable","px-2"],[1,"btn","btn-success","mx-1"],[1,"zmdi","zmdi-file","zmdi-hc-lg","mr-2"],["aria-labelledby","csvClientsDropdown",1,"dropdown-menu","px-1","py-1"],[1,"menu-list"],[1,"d-flex","align-items-center","px-3","my-1","clickeable-hover",3,"click"],[1,"zmdi","zmdi-file-text"],[1,"pl-2"],[1,"zmdi","zmdi-file-plus"],["class","row justify-content-center",4,"ngIf","ngIfElse"],["bigLoading",""],["noClientsMessage",""],["addClientsByCsvModal",""],["deleteClientModal",""],["addOrEditClientModal",""],[1,"row","justify-content-center"],[1,"col-12","col-lg-11","mt-3","mb-4"],[3,"timerTrigger","filters","onSearch"],["class","col-12 col-lg-11",4,"ngIf","ngIfElse"],[1,"col-12","col-lg-11"],[1,"table","table-striped"],[1,"table-thead"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","justify-content-center"],[1,"zmdi","zmdi-edit","zmdi-hc-lg","clickeable","mx-2",3,"click"],[1,"zmdi","zmdi-delete","zmdi-hc-lg","clickeable","mx-2",3,"click"],[1,"w-100","h-75","d-flex","align-items-center","justify-content-center",2,"min-height","min-content"],[1,"zmdi","zmdi-spinner","zmdi-hc-5x","zmdi-hc-spin"],[1,"no-items-message"],[1,"modal-header"],[1,"modal-title"],[1,"close-modal-button","zmdi","zmdi-close-circle-o","zmdi-hc-2x","clickeable",3,"click"],[1,"modal-body"],[1,"d-flex","flex-column","justify-content-between"],[1,"btn","btn-outline-primary",3,"click"],["type","file","accept",".csv",1,"d-none",3,"change"],["csvFileInput",""],["class","modal-table",4,"ngIf"],[1,"modal-footer"],[1,"btn","btn-secondary",3,"click"],[4,"ngIf"],[1,"btn","btn-success",3,"click"],[1,"modal-table"],[1,"my-4","text-center",2,"font-size","1.25rem","font-weight","700"],[1,"table","table-danger","table-striped"],[1,"table-thead","bg-danger"],[1,"btn","btn-danger",3,"click"],[1,"w-100"],[3,"formGroup"],[1,"row"],[1,"col-12"],[1,"form-group"],[1,"text-danger"],[1,"input-container"],[1,"input-icon","zmdi","zmdi-account-o","zmdi-hc-lg"],["type","text","placeholder","Nombre del cliente","formControlName","name",1,"form-control",3,"keyup.enter"],["class","error-messages",4,"ngIf"],["type","text","placeholder","RFC del cliente","formControlName","rfc",1,"form-control",3,"keyup.enter"],[1,"col-12","col-sm-6"],[1,"input-icon","zmdi","zmdi-home","zmdi-hc-lg"],["type","text","placeholder","Direcci\xf3n del cliente","formControlName","address",1,"form-control",3,"keyup.enter"],["type","text","placeholder","C\xf3digo posal del cliente","formControlName","postalCode",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-globe","zmdi-hc-lg"],["type","text","placeholder","Estado del cliente","formControlName","state",1,"form-control",3,"keyup.enter"],["type","text","placeholder","Pa\xeds del cliente","formControlName","country",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-balance-wallet","zmdi-hc-lg"],["type","text","placeholder","Porcentaje de utilidad del cliente","formControlName","utilityPercentage",1,"form-control",3,"keyup.enter"],[1,"input-icon","zmdi","zmdi-time-countdown","zmdi-hc-lg"],["type","text","placeholder","Dias de pago del cliente","formControlName","paymentDays",1,"form-control",3,"keyup.enter"],[1,"btn","btn-primary",3,"click"],[1,"error-messages"],["class","d-block",4,"ngIf"],[1,"d-block"]],template:function(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"i",3),t.NdJ("click",function(){return l.GoHome()}),t.qZA(),t._uU(4," Mis clientes "),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(33);return l.modal.OpenModal(s)}),t._UZ(7,"i",6),t._uU(8," Agregar "),t.qZA(),t.TgZ(9,"div",7),t.TgZ(10,"button",8),t._UZ(11,"i",9),t._uU(12," CSV "),t.qZA(),t.TgZ(13,"div",10),t.TgZ(14,"div",11),t.TgZ(15,"div",12),t.NdJ("click",function(){return l.DownloadTemplate()}),t._UZ(16,"i",13),t.TgZ(17,"span",14),t._uU(18,"Descargar plantilla"),t.qZA(),t.qZA(),t.TgZ(19,"div",12),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(29);return l.modal.OpenModal(s)}),t._UZ(20,"i",15),t.TgZ(21,"span",14),t._uU(22,"Subir archivo"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(23,w,4,5,"div",16),t.qZA(),t.YNc(24,k,2,0,"ng-template",null,17,t.W1O),t.YNc(26,J,3,0,"ng-template",null,18,t.W1O),t.YNc(28,z,20,5,"ng-template",null,19,t.W1O),t.YNc(30,G,12,1,"ng-template",null,20,t.W1O),t.YNc(32,at,91,11,"ng-template",null,21,t.W1O)}if(2&e){const o=t.MAs(25);t.xp6(23),t.Q6J("ngIf",!l.loading.getting)("ngIfElse",o)}},directives:[d.O5,F.b,d.sg,r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u],styles:[""]}),n})()}];let mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[r.u5,d.ez,f.O,T.F,r.UX,C.Bz.forChild(_t)]]}),n})()}}]);